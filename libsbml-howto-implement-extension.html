<!-- HTML header for Doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>libSBML C++ API: Step by step summary of the implementation of an extension</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="sbml.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="libsbml-doxygen-stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libSBML C++ API
   &#160;<span id="projectnumber">5.20.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('libsbml-howto-implement-extension.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Step by step summary of the implementation of an extension </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#implem-dir">1. Create the directory structure</a></li>
<li class="level1"><a href="#implem-sbaseplugin">2. Derive classes from SBasePlugin</a></li>
<li class="level1"><a href="#implem-sbmldocument">3. Derive a class from SBMLDocumentPlugin if necessary</a></li>
<li class="level1"><a href="#implem-sbase">4. Derive classes from SBase</a></li>
<li class="level1"><a href="#implem-sbmlext">5. Derive a class from SBMLExtension</a></li>
<li class="level1"><a href="#forward-decl">6. Implement a forward declaration file</a></li>
<li class="level1"><a href="#header-file">7. Implement a package header file</a></li>
<li class="level1"><a href="#config-macros">8. Define files for package registration</a></li>
<li class="level1"><a href="#hook-bindings">9. Hook into the language bindings</a></li>
<li class="level1"><a href="#hook-build">10. Hook into the libSBML build system</a></li>
</ul>
</div>
<div class="textblock"><p>This section describes the steps necessary to implement a <em>package extension</em> (also known as a <em>package plugin</em>) for libSBML by hand. The purpose of this section is to document the process. In practice, the libSBML developers no longer write package extensions by hand, but instead, use a code generation system under development by the libSBML Team (a system called DEVISER, short for <em>Design Explorer and Viewer for Iterative SBML Enhancement of Representations</em>). This code generator embodies the steps below.</p>
<h1><a class="anchor" id="implem-dir"></a>
1. Create the directory structure</h1>
<p>The conventional structure for a libSBML package extension involves two main directories, one for the implementation sources and one for example code. The following illustrates this structure:</p>
<pre style="margin-left: 20px; line-height: 100%">
<span class="placeholder">package_root</span>
│
├── examples
│   ├── c
│   ├── c++
│   ├── csharp
│   ├── java
│   ├── javascript
│   ├── perl
│   ├── python
│   ├── r
│   └── ruby
│
└── src
    ├── bindings
    │   ├── csharp
    │   ├── java
    │   ├── javascript
    │   ├── perl
    │   ├── python
    │   ├── r
    │   ├── ruby
    │   └── swig
    │
    └── sbml
        └── packages
            │
            └── <span class="placeholder">package_name</span>
                │
                ├── common
                │   └── test
                ├── extension
                │   └── test
                ├── sbml
                │   └── test
                ├── util
                │   └── test
                └── validator
                    └── test
</pre><p>The top-level directory, <span class="placeholder">package_root</span>, can be named anything, although by convention it's named after the SBML Level&#160;3 package being implemented. The directory <span class="placeholder">package_name</span> should be the nickname or short-form name of the package (e.g., "comp" for the Hierarchical Model Composition package).</p>
<p>The directory structure for the implementation of the package (the tree root at <code>src</code>) is separated into two main branches: <code>bindings</code> for the programming language interfaces (known as the <em>language bindings</em> in libSBML-speak) generated with the help of SWIG, and <code>sbml</code> for actual package code. The subdirectories under <span class="placeholder">package_name</span> have the following purposes:</p>
<ul>
<li><code>common</code>: This contains header files that provide forward declarations for all the object classes defined by the package, plus any other common headers and/or code.</li>
</ul>
<ul>
<li><code>extension</code>: This contains the code for the all of the extensions of libSBML classes defined by the package. For example, if a package extends the <a class="el" href="class_model.html">Model</a> object, this is where the extension class code is placed.</li>
</ul>
<ul>
<li><code>sbml</code>: This contains all the new SBML object classes defined by the package.</li>
</ul>
<ul>
<li><code>util</code>: As its name implies, this contains any utility classes or other code that a package might need in its implementation.</li>
</ul>
<ul>
<li><code>validator</code>: This contains code for SBML validation of the package constructs.</li>
</ul>
<p>Examples of real package extensions employing the directory structure described above can be found in the libSBML source distribution, in the <code>src/sbml/packages</code> subdirectory.</p>
<h1><a class="anchor" id="implem-sbaseplugin"></a>
2. Derive classes from SBasePlugin</h1>
<p>Certain classes in an SBML Level&#160;3 package will be subclasses of existing core SBML constructs, and other classes will be entirely ones introduced by the package. Existing SBML classes can be extended through the use of the special-purpose classes <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> and <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a>, while new classes are implemented as objects derived from the basic <a class="el" href="class_s_base.html">SBase</a> class. We discuss <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> in this section, <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a> in the next section, and the implementation of entirely new classes in the section after that.</p>
<p>The <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> class is libSBML's base class for extensions of core SBML component objects. It defines basic virtual methods for reading/writing/checking additional attributes and/or subobjects; and these methods should be overridden by subclasses to implement the necessary features of an extended SBML object. The documentation for the <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> class describes the steps necessary to use it to extend existing object classes. Here we summarize the steps:</p>
<ol>
<li>
<p class="startli"><em>Identify the SBML objects that need to be extended</em>. Any existing SBML object that gets new attributes or subobjects falls into this category. For instance, a package may need to extend <a class="el" href="class_model.html">Model</a> to add new list of entities (as the SBML Level&#160;3 Layout package does with <a class="el" href="class_list_of_layouts.html">ListOfLayouts</a>).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Create a <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> subclass for each extended SBML object class</em>. This involves several substeps, summarized briefly here:</p>
<ol style="list-style-type: lower-latin">
<li>
<p class="startli">Define protected data members and implement their initialization as well as their handling by assignment operators, copy operators, and other necessary operators or fields.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> class-related methods such as the class constructor, copy constructor, and others.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> virtual methods for attributes on the SBML object.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> virtual methods for subobjects, if the object class contains other classes of objects.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> virtual methods for XML namespaces, if the SBML package uses extra XML namespaces beyond the default SBML namespace.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Implement additional methods as needed.</p>
<p class="endli"></p>
</li>
</ol>
<p class="endli"></p>
</li>
</ol>
<p>A subclass of <a class="el" href="class_s_base_plugin.html">SBasePlugin</a>, <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a>, is designed specifically for extending the top-level SBML container object. It should be used instead of <a class="el" href="class_s_base_plugin.html">SBasePlugin</a> to add attributes or subobjects to the <code>&lt;sbml&gt;</code> XML element, if an SBML package calls for it. The next section discusses this further.</p>
<p>In the directory structure for packages (<a class="el" href="libsbml-howto-implement-extension.html#implem-dir"><ol type="1">
<li>Create the directory structure</li>
</ol>
</a>), the code for extensions of existing libSBML classes is placed in the subdirectory named <code>extension</code>.</p>
<h1><a class="anchor" id="implem-sbmldocument"></a>
3. Derive a class from SBMLDocumentPlugin if necessary</h1>
<p>SBML Level&#160;3 packages typically do not make any changes to the top-level <code>&lt;sbml&gt;</code> XML element beyond adding an attribute named "required", so in most cases, the extension of <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> is very simple. Here follows a summary of the basic steps; the documentation for the <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a> class explains the steps in more detail.</p>
<ol>
<li>
<p class="startli"><em>Identify the changes necessary to <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a></em>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Create the <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a> subclass</em>. This involves several substeps:</p>
<ol style="list-style-type: lower-latin">
<li>
<p class="startli">Override class-related methods derived from <a class="el" href="class_s_base_plugin.html">SBasePlugin</a>, the parent class of <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Determine the necessary value of the "required" attribute and set up the class implementation to set/test/manage the value accordingly.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define protected data members, if the package definition requires any.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override virtual methods for new attributes, if any.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override virtual methods for subobjects, if the package defines any new objects under the top-level <code>&lt;sbml&gt;</code> XML element.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override virtual methods for XML namespaces.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Implement additional methods as needed.</p>
<p class="endli"></p>
</li>
</ol>
</li>
</ol>
<p>In the directory structure for packages (Section <a class="el" href="libsbml-howto-implement-extension.html#implem-dir"><ol type="1">
<li>Create the directory structure</li>
</ol>
</a>), the code using <a class="el" href="class_s_b_m_l_document_plugin.html">SBMLDocumentPlugin</a> is placed in the subdirectory named <code>extension</code>, grouped together with the classes derived from <a class="el" href="class_s_base_plugin.html">SBasePlugin</a>.</p>
<h1><a class="anchor" id="implem-sbase"></a>
4. Derive classes from SBase</h1>
<p>As mentioned above, some classes in SBML Level&#160;3 package specifications typically are defined as subclasses of existing core SBML objects such as <a class="el" href="class_model.html">Model</a>, <a class="el" href="class_reaction.html">Reaction</a>, <a class="el" href="class_parameter.html">Parameter</a>, and so forth, while others are defined as entirely new classes. If the package specification calls for <em>new</em> SBML objects derived from SBML's abstract <em><b>SBase</b></em> class, the libSBML package extension should implemented them by deriving them from the libSBML <a class="el" href="class_s_base.html">SBase</a> class.</p>
<p>The following are the basic steps to subclassing <a class="el" href="class_s_base.html">SBase</a> for the implementation of each new SBML object class:</p>
<ol>
<li>
<p class="startli"><em>Identify the attributes of the class</em>. Objects will have attributes, subobjects (usually either for a mathematical formula or a list of subobjects inside a <a class="el" href="class_list_of.html">ListOf</a>), or a mixture of both. When an object has attributes, each attribute will have a data type; this data type will be either one of the core SBML primitive types or a new type defined in the specification for the package. The first step is to gather the requirements for these attributes.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Identify the subobjects of each object class</em>. Another necessary requirements analysis step is determining if any subobjects need to be defined and contained withing other objects. Any that are subclassed from <a class="el" href="class_s_base.html">SBase</a> will be their own separate class, and will be contained inside another class derived from <a class="el" href="class_list_of.html">ListOf</a>. (For example, <a class="el" href="class_list_of_layouts.html">ListOfLayouts</a> in the SBML Level&#160;3 Layout package.)</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Write the implementation of each class</em>.</p>
<ol style="list-style-type: lower-latin">
<li>
<p class="startli">Define protected data members that store identified subobjects and/or attributes. For example, the the <code>Groups</code> class in the Groups package needs protected data members for the object identifier ("id") attribute, object name ("name") attribute, a list of <code><a class="el" href="class_member.html">Member</a></code> objects (stored in a <code><a class="el" href="class_list_of_members.html">ListOfMembers</a></code> class object derived from <a class="el" href="class_list_of.html">ListOf</a>), and more. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define the following two class constructors: (i) a constructor that accepts three arguments for the SBML Level, SBML Version, and package version; and (ii) a constructor that accepts an object derived from <a class="el" href="class_s_b_m_l_namespaces.html">SBMLNamespaces</a>. Make sure that the implementation of the constructor calls the parent's constructor, and that the default SBML Level, Version and package version are given as default arguments. The implementation also has to call the method <code>setSBMLNamespacesAndOwn()</code> with the package-specific <a class="el" href="class_s_b_m_l_extension_namespaces.html">SBMLExtensionNamespaces</a> object, as well as the method <code>connectToChild()</code>. Here is an example from the Groups package: </p><div class="fragment"><div class="line"><a class="code" href="class_group.html#a67a3515c557559610717fd77283c84b9">Group::Group</a> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> level, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> version, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pkgVersion) </div>
<div class="line">  : <a class="code" href="class_s_base.html">SBase</a> (level, version)</div>
<div class="line">   ,mId(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">   ,mName(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">   ,mKind(<a class="code" href="_groups_extension_8h.html#a694e53b03766f3518893708f3167a384a6f8d278c0c78f4eea77ef7e9ece7d048">GROUP_KIND_UNKNOWN</a>)</div>
<div class="line">   ,mMembers(level, version, pkgVersion)</div>
<div class="line">   ,mMemberConstraints (level, version, pkgVersion)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// set an SBMLNamespaces derived object of this package</span></div>
<div class="line">  setSBMLNamespacesAndOwn(<span class="keyword">new</span> <a class="code" href="_groups_extension_8h.html#adee9b080ccff4167ff881364bd7aa902">GroupsPkgNamespaces</a>(level, version, pkgVersion));</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// connect to child objects</span></div>
<div class="line">  connectToChild();</div>
<div class="line">}</div>
<div class="ttc" id="a_groups_extension_8h_html_a694e53b03766f3518893708f3167a384a6f8d278c0c78f4eea77ef7e9ece7d048"><div class="ttname"><a href="_groups_extension_8h.html#a694e53b03766f3518893708f3167a384a6f8d278c0c78f4eea77ef7e9ece7d048">GROUP_KIND_UNKNOWN</a></div><div class="ttdeci">@ GROUP_KIND_UNKNOWN</div><div class="ttdef"><b>Definition:</b> GroupsExtension.h:408</div></div>
<div class="ttc" id="a_groups_extension_8h_html_adee9b080ccff4167ff881364bd7aa902"><div class="ttname"><a href="_groups_extension_8h.html#adee9b080ccff4167ff881364bd7aa902">GroupsPkgNamespaces</a></div><div class="ttdeci">SBMLExtensionNamespaces&lt; GroupsExtension &gt; GroupsPkgNamespaces</div><div class="ttdoc">Required typedef definitions.</div><div class="ttdef"><b>Definition:</b> GroupsExtension.h:355</div></div>
<div class="ttc" id="aclass_group_html_a67a3515c557559610717fd77283c84b9"><div class="ttname"><a href="class_group.html#a67a3515c557559610717fd77283c84b9">Group::Group</a></div><div class="ttdeci">Group(unsigned int level=GroupsExtension::getDefaultLevel(), unsigned int version=GroupsExtension::getDefaultVersion(), unsigned int pkgVersion=GroupsExtension::getDefaultPackageVersion())</div><div class="ttdoc">Creates a new Group using the given SBML Level, Version and “groups” package version.</div><div class="ttdef"><b>Definition:</b> Group.cpp:64</div></div>
<div class="ttc" id="aclass_s_base_html"><div class="ttname"><a href="class_s_base.html">SBase</a></div><div class="ttdef"><b>Definition:</b> SBase.h:191</div></div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli">Define a constructor that accepts an <a class="el" href="class_s_b_m_l_namespaces.html">SBMLNamespaces</a> object. This constructor needs to call three methods, as illustrated in the body of this example from the Groups package: </p><div class="fragment"><div class="line"><a class="code" href="class_group.html#a67a3515c557559610717fd77283c84b9">Group::Group</a>(<a class="code" href="class_groups_pkg_namespaces.html">GroupsPkgNamespaces</a>* groupsns)</div>
<div class="line"> : <a class="code" href="class_s_base.html">SBase</a>(groupsns)</div>
<div class="line">  ,mId(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">  ,mName(<span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line">  ,mKind(<a class="code" href="_groups_extension_8h.html#a694e53b03766f3518893708f3167a384a6f8d278c0c78f4eea77ef7e9ece7d048">GROUP_KIND_UNKNOWN</a>)</div>
<div class="line">  ,mMembers(groupsns)</div>
<div class="line">   ,mMemberConstraints (groupsns)</div>
<div class="line">{</div>
<div class="line">  <span class="comment">// set the element namespace of this object</span></div>
<div class="line">  setElementNamespace(groupsns-&gt;getURI());</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// connect to child objects</span></div>
<div class="line">  connectToChild();</div>
<div class="line"> </div>
<div class="line">  <span class="comment">// load package extensions bound with this object (if any) </span></div>
<div class="line">  loadPlugins(groupsns);</div>
<div class="line">}</div>
<div class="ttc" id="aclass_groups_pkg_namespaces_html"><div class="ttname"><a href="class_groups_pkg_namespaces.html">GroupsPkgNamespaces</a></div></div>
</div><!-- fragment --> <p class="interli">The call to <code>loadPlugins(...)</code> is necessary to allow the package to be extended by <em>other</em> package extensions. It is also worth noting that the constructor for <a class="el" href="class_s_b_m_l_namespaces.html">SBMLNamespaces</a> and its derived class <a class="el" href="class_s_b_m_l_extension_namespaces.html">SBMLExtensionNamespaces</a> throw an <a class="el" href="class_s_b_m_l_extension_exception.html">SBMLExtensionException</a> if the argument it is given is invalid. Callers will have to create the object using code such as the following example from the Layout package: </p><div class="fragment"><div class="line"><span class="keywordflow">try</span></div>
<div class="line">{</div>
<div class="line">  LayputPkgNamespaces layoutns(3, 1, 1);</div>
<div class="line">  <a class="code" href="class_layout.html">Layout</a>              layout(&amp;layoutns); </div>
<div class="line">}</div>
<div class="line"><span class="keywordflow">catch</span> (<a class="code" href="class_s_b_m_l_extension_exception.html">SBMLExtensionException</a> e)</div>
<div class="line">{</div>
<div class="line">  cerr &lt;&lt; <span class="stringliteral">&quot;Caught &quot;</span> &lt;&lt; e.what() &lt;&lt; endl;</div>
<div class="line">}</div>
<div class="ttc" id="aclass_layout_html"><div class="ttname"><a href="class_layout.html">Layout</a></div><div class="ttdef"><b>Definition:</b> Layout.h:789</div></div>
<div class="ttc" id="aclass_s_b_m_l_extension_exception_html"><div class="ttname"><a href="class_s_b_m_l_extension_exception.html">SBMLExtensionException</a></div><div class="ttdef"><b>Definition:</b> SBMLExtensionException.h:65</div></div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli">Override the copy constructor, assignment operator, and <code>clone()</code> methods from <a class="el" href="class_s_base.html">SBase</a> and implement appropriate versions for the package.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the following virtual methods if the object defines "id" and "name" attributes: <code>setId(...)</code>, <code>setName(...)</code>, <code>isSetId(...)</code>, <code>isSetName(...)</code>, <code>unsetId(...)</code>, <code>unsetName(...)</code>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">If the SBML object defines any other attributes, then for every attribute defined by the class, implement new methods to set, get, unset, and query the attribute value. For an attribute named <span class="placeholder">ATTRIB</span>, this will lead to methods named <code>set<span class="placeholder-nospace">ATTRIB</span></code>, <code>get<span class="placeholder-nospace">ATTRIB</span></code>, <code>isSet<span class="placeholder-nospace">ATTRIB</span></code>, and <code>unset<span class="placeholder-nospace">ATTRIB</span></code>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the following virtual methods if the object defines any attributes:</p>
<ul>
<li>
<p class="startli"><code>addExpectedAttributes(ExpectedAttributes&amp; attributes)</code>: This method should add the attributes that are expected to be found on this kind of extended object in an SBML file or data stream.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>readAttributes(<a class="el" href="class_x_m_l_attributes.html">XMLAttributes</a>&amp; attributes, ExpectedAttributes&amp; expectedAttributes)</code>: This method should read the attributes expected to be found on this kind of extended object in an SBML file or data stream.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>hasRequiredAttributes()</code>: This method should return <code>true</code> if all of the required attribute for this extended object are present on instance of the object.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>writeAttributes(XMLOutputStream&amp; stream)</code>: This method should write out the attributes of an extended object. The implementation should use the different kinds of <code>writeAttribute</code> methods defined by <a class="el" href="class_x_m_l_output_stream.html">XMLOutputStream</a> to achieve this.</p>
<p class="endli"></p>
</li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the following virtual methods if the object defines one or more subobjects:</p>
<ul>
<li>
<p class="startli"><code>createObject(XMLInputStream&amp; stream)</code>: Subclasses must override this method to create, store, and then return an SBML object corresponding to the next <a class="el" href="class_x_m_l_token.html">XMLToken</a> in the <a class="el" href="class_x_m_l_input_stream.html">XMLInputStream</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>connectToParent(SBase *sbase)</code>: This creates a parent-child relationship between a given extended object and its subcomponent(s).</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>setSBMLDocument(SBMLDocument* d)</code>: This method should set the parent <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object on the subcomponent object instances, so that the subcomponent instances know which <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> contains them.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>enablePackageInternal(std::string&amp; pkgURI, std::string&amp; pkgPrefix, bool flag)</code>: This method should enable or disable the subcomponent based on whether a given XML namespace is active.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>writeElements(XMLOutputStream&amp; stream)</code>: This method must be overridden to provide an implementation that will write out the expected subcomponents/subelements to the XML output stream.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><code>readOtherXML(SBase* parentObject, XMLInputStream&amp; stream)</code>: This function should be overridden if XML elements containing annotations, notes, MathML content, etc., need to be directly parsed from the given <a class="el" href="class_x_m_l_input_stream.html">XMLInputStream</a> object.</p>
<p class="endli"></p>
</li>
<li>
<code>hasRequiredElements()</code>: This method should return <code>true</code> if a given object contains all the required subcomponents defined by the specification for that SBML Level&#160;3 package. </li>
</ul>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the virtual method <code>writeXMLNS(<a class="el" href="class_x_m_l_output_stream.html">XMLOutputStream</a>&amp; stream)</code> if the package needs to add additional <code>xmlns</code> attributes to declare additional XML namespace URIs. </p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define any additional methods needed by the class, for example to add and remove subobjects.</p>
<p class="endli"></p>
</li>
</ol>
</li>
</ol>
<p>In the directory structure for packages (Section <a class="el" href="libsbml-howto-implement-extension.html#implem-dir"><ol type="1">
<li>Create the directory structure</li>
</ol>
</a>), the code for new object classes is placed in the subdirectory named <code>sbml</code>.</p>
<p>Developers can take advantage of the many package implementations available for libSBML to see real-life examples of objects derived from <a class="el" href="class_s_base.html">SBase</a>.</p>
<h1><a class="anchor" id="implem-sbmlext"></a>
5. Derive a class from SBMLExtension</h1>
<p>The <a class="el" href="class_s_b_m_l_extension.html">SBMLExtension</a> class is an abstract class that must be extended by each package extension implementation. The class provides methods for managing common attributes of package extensions (e.g., the SBML package name, the package version, and more), registration of instantiated <a class="el" href="class_s_base_plugin_creator.html">SBasePluginCreator</a> objects, and initialization/registration of package extensions when the library code for the package is loaded by libSBML.</p>
<p>The documentation for <a class="el" href="class_s_b_m_l_extension.html">SBMLExtension</a> explains in detail the process of extending the class as part of the implementation of a package extension. The following is a summary of the steps:</p>
<ol>
<li>
<p class="startli">Define a <code>getPackageName()</code> method that returns the name of the package as a string.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define a set of methods that return the default SBML Level, SBML Version and version of the package.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define methods returning the package namespace URIs</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override basic pure virtual methods on <a class="el" href="class_s_b_m_l_extension.html">SBMLExtension</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Create definitions derived from <a class="el" href="class_s_b_m_l_extension_namespaces.html">SBMLExtensionNamespaces</a>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the <a class="el" href="class_s_b_m_l_extension.html">SBMLExtension</a> method <code>getSBMLExtensionNamespaces()</code>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Define an enumeration for the package object type codes.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Override the <a class="el" href="class_s_b_m_l_extension.html">SBMLExtension</a> method <code>getStringFromTypeCode()</code>.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Implement an <code>init()</code> method.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">Instantiate a global <a class="el" href="class_s_b_m_l_extension_register.html">SBMLExtensionRegister</a> object.</p>
<p class="endli"></p>
</li>
</ol>
<h1><a class="anchor" id="forward-decl"></a>
6. Implement a forward declaration file</h1>
<p>Create a file that provides forward declarations for all classes defined by the package extension. In the directory structure for packages (Section <a class="el" href="libsbml-howto-implement-extension.html#implem-dir"><ol type="1">
<li>Create the directory structure</li>
</ol>
</a>), this file should be placed in the subdirectory named <code>common</code>. Here is an example from the Layout package; this can be found in the file <code>src/packages/layout/common/layoutfwd.h</code>. The definition of <code>CLASS_OR_STRUCT</code> is to permit this code to work for both C and C++:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef layoutfwd_h__</span></div>
<div class="line"><span class="preprocessor">#define layoutfwd_h__</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef __cplusplus</span></div>
<div class="line"><span class="preprocessor">#  define CLASS_OR_STRUCT class</span></div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="preprocessor">#  define CLASS_OR_STRUCT struct</span></div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* __cplusplus */</span><span class="preprocessor"></span></div>
<div class="line"> </div>
<div class="line">LIBSBML_CPP_NAMESPACE_BEGIN</div>
<div class="line"> </div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_bounding_box.html">BoundingBox</a>                     <a class="code" href="layoutfwd_8h.html#a0b333b9c2204d52127b1ac7d0b4bb8f4">BoundingBox_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_compartment_glyph.html">CompartmentGlyph</a>                <a class="code" href="layoutfwd_8h.html#a1a95d91d450f3deda5bcf2af09aa830f">CompartmentGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_cubic_bezier.html">CubicBezier</a>                     <a class="code" href="layoutfwd_8h.html#a899e2ceab8b2218357843238c9c9f720">CubicBezier_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_curve.html">Curve</a>                           <a class="code" href="layoutfwd_8h.html#a1df20c978e5ecf6332e20f60cd52ff80">Curve_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_dimensions.html">Dimensions</a>                      <a class="code" href="layoutfwd_8h.html#a0e6ac46029a5226544f291eba447fa1a">Dimensions_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_general_glyph.html">GeneralGlyph</a>                    <a class="code" href="layoutfwd_8h.html#a27837361eba9519817d1a6ad64f6d11f">GeneralGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_graphical_object.html">GraphicalObject</a>                 <a class="code" href="layoutfwd_8h.html#abb168b4a7c32125fe0c2a88293a9bbf9">GraphicalObject_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_layout.html">Layout</a>                          <a class="code" href="layoutfwd_8h.html#aa672640788a12f1e0a746aa6377f9286">Layout_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_line_segment.html">LineSegment</a>                     <a class="code" href="layoutfwd_8h.html#a31e7305a6c49c2c93a3f7c190765f1b3">LineSegment_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_point.html">Point</a>                           <a class="code" href="layoutfwd_8h.html#a6f3eaf27774b06a6e615ff7f4048f99d">Point_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_reaction_glyph.html">ReactionGlyph</a>                   <a class="code" href="layoutfwd_8h.html#aeeb8561be33c83bd9a89bcaecf0ccbb8">ReactionGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_reference_glyph.html">ReferenceGlyph</a>                  <a class="code" href="layoutfwd_8h.html#a909fed9e913c33b208954cd6c3c09690">ReferenceGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_species_glyph.html">SpeciesGlyph</a>                    <a class="code" href="layoutfwd_8h.html#ae70e0d0acc7bf67230f3539f304c7f87">SpeciesGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_species_reference_glyph.html">SpeciesReferenceGlyph</a>           <a class="code" href="layoutfwd_8h.html#a232236cc2c304d09ffa01aaee80fb8e5">SpeciesReferenceGlyph_t</a>;</div>
<div class="line"><span class="keyword">typedef</span> <a class="code" href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a> <a class="code" href="class_text_glyph.html">TextGlyph</a>                       <a class="code" href="layoutfwd_8h.html#a8e2e4c6ae29ac64809a21007050c15de">TextGlyph_t</a>;</div>
<div class="line"> </div>
<div class="line">LIBSBML_CPP_NAMESPACE_END</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#undef CLASS_OR_STRUCT</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* layoutfwd_h__ */</span><span class="preprocessor"></span></div>
<div class="ttc" id="aclass_bounding_box_html"><div class="ttname"><a href="class_bounding_box.html">BoundingBox</a></div><div class="ttdef"><b>Definition:</b> BoundingBox.h:64</div></div>
<div class="ttc" id="aclass_compartment_glyph_html"><div class="ttname"><a href="class_compartment_glyph.html">CompartmentGlyph</a></div><div class="ttdef"><b>Definition:</b> CompartmentGlyph.h:60</div></div>
<div class="ttc" id="aclass_cubic_bezier_html"><div class="ttname"><a href="class_cubic_bezier.html">CubicBezier</a></div><div class="ttdef"><b>Definition:</b> CubicBezier.h:71</div></div>
<div class="ttc" id="aclass_curve_html"><div class="ttname"><a href="class_curve.html">Curve</a></div><div class="ttdef"><b>Definition:</b> Curve.h:217</div></div>
<div class="ttc" id="aclass_dimensions_html"><div class="ttname"><a href="class_dimensions.html">Dimensions</a></div><div class="ttdef"><b>Definition:</b> Dimensions.h:71</div></div>
<div class="ttc" id="aclass_general_glyph_html"><div class="ttname"><a href="class_general_glyph.html">GeneralGlyph</a></div><div class="ttdef"><b>Definition:</b> GeneralGlyph.h:249</div></div>
<div class="ttc" id="aclass_graphical_object_html"><div class="ttname"><a href="class_graphical_object.html">GraphicalObject</a></div><div class="ttdef"><b>Definition:</b> GraphicalObject.h:75</div></div>
<div class="ttc" id="aclass_line_segment_html"><div class="ttname"><a href="class_line_segment.html">LineSegment</a></div><div class="ttdef"><b>Definition:</b> LineSegment.h:69</div></div>
<div class="ttc" id="aclass_point_html"><div class="ttname"><a href="class_point.html">Point</a></div><div class="ttdef"><b>Definition:</b> Point.h:65</div></div>
<div class="ttc" id="aclass_reaction_glyph_html"><div class="ttname"><a href="class_reaction_glyph.html">ReactionGlyph</a></div><div class="ttdef"><b>Definition:</b> ReactionGlyph.h:255</div></div>
<div class="ttc" id="aclass_reference_glyph_html"><div class="ttname"><a href="class_reference_glyph.html">ReferenceGlyph</a></div><div class="ttdef"><b>Definition:</b> ReferenceGlyph.h:70</div></div>
<div class="ttc" id="aclass_species_glyph_html"><div class="ttname"><a href="class_species_glyph.html">SpeciesGlyph</a></div><div class="ttdef"><b>Definition:</b> SpeciesGlyph.h:65</div></div>
<div class="ttc" id="aclass_species_reference_glyph_html"><div class="ttname"><a href="class_species_reference_glyph.html">SpeciesReferenceGlyph</a></div><div class="ttdef"><b>Definition:</b> SpeciesReferenceGlyph.h:71</div></div>
<div class="ttc" id="aclass_text_glyph_html"><div class="ttname"><a href="class_text_glyph.html">TextGlyph</a></div><div class="ttdef"><b>Definition:</b> TextGlyph.h:65</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a0b333b9c2204d52127b1ac7d0b4bb8f4"><div class="ttname"><a href="layoutfwd_8h.html#a0b333b9c2204d52127b1ac7d0b4bb8f4">BoundingBox_t</a></div><div class="ttdeci">class BoundingBox BoundingBox_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:79</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a0e6ac46029a5226544f291eba447fa1a"><div class="ttname"><a href="layoutfwd_8h.html#a0e6ac46029a5226544f291eba447fa1a">Dimensions_t</a></div><div class="ttdeci">class Dimensions Dimensions_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:83</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a1a95d91d450f3deda5bcf2af09aa830f"><div class="ttname"><a href="layoutfwd_8h.html#a1a95d91d450f3deda5bcf2af09aa830f">CompartmentGlyph_t</a></div><div class="ttdeci">class CompartmentGlyph CompartmentGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:80</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a1df20c978e5ecf6332e20f60cd52ff80"><div class="ttname"><a href="layoutfwd_8h.html#a1df20c978e5ecf6332e20f60cd52ff80">Curve_t</a></div><div class="ttdeci">class Curve Curve_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:82</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a232236cc2c304d09ffa01aaee80fb8e5"><div class="ttname"><a href="layoutfwd_8h.html#a232236cc2c304d09ffa01aaee80fb8e5">SpeciesReferenceGlyph_t</a></div><div class="ttdeci">class SpeciesReferenceGlyph SpeciesReferenceGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:92</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a27837361eba9519817d1a6ad64f6d11f"><div class="ttname"><a href="layoutfwd_8h.html#a27837361eba9519817d1a6ad64f6d11f">GeneralGlyph_t</a></div><div class="ttdeci">class GeneralGlyph GeneralGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:84</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a31e7305a6c49c2c93a3f7c190765f1b3"><div class="ttname"><a href="layoutfwd_8h.html#a31e7305a6c49c2c93a3f7c190765f1b3">LineSegment_t</a></div><div class="ttdeci">class LineSegment LineSegment_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:87</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a6f3eaf27774b06a6e615ff7f4048f99d"><div class="ttname"><a href="layoutfwd_8h.html#a6f3eaf27774b06a6e615ff7f4048f99d">Point_t</a></div><div class="ttdeci">class Point Point_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:88</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a899e2ceab8b2218357843238c9c9f720"><div class="ttname"><a href="layoutfwd_8h.html#a899e2ceab8b2218357843238c9c9f720">CubicBezier_t</a></div><div class="ttdeci">class CubicBezier CubicBezier_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:81</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a8e2e4c6ae29ac64809a21007050c15de"><div class="ttname"><a href="layoutfwd_8h.html#a8e2e4c6ae29ac64809a21007050c15de">TextGlyph_t</a></div><div class="ttdeci">class TextGlyph TextGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:93</div></div>
<div class="ttc" id="alayoutfwd_8h_html_a909fed9e913c33b208954cd6c3c09690"><div class="ttname"><a href="layoutfwd_8h.html#a909fed9e913c33b208954cd6c3c09690">ReferenceGlyph_t</a></div><div class="ttdeci">class ReferenceGlyph ReferenceGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:90</div></div>
<div class="ttc" id="alayoutfwd_8h_html_aa672640788a12f1e0a746aa6377f9286"><div class="ttname"><a href="layoutfwd_8h.html#aa672640788a12f1e0a746aa6377f9286">Layout_t</a></div><div class="ttdeci">class Layout Layout_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:86</div></div>
<div class="ttc" id="alayoutfwd_8h_html_abb168b4a7c32125fe0c2a88293a9bbf9"><div class="ttname"><a href="layoutfwd_8h.html#abb168b4a7c32125fe0c2a88293a9bbf9">GraphicalObject_t</a></div><div class="ttdeci">class GraphicalObject GraphicalObject_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:85</div></div>
<div class="ttc" id="alayoutfwd_8h_html_ae70e0d0acc7bf67230f3539f304c7f87"><div class="ttname"><a href="layoutfwd_8h.html#ae70e0d0acc7bf67230f3539f304c7f87">SpeciesGlyph_t</a></div><div class="ttdeci">class SpeciesGlyph SpeciesGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:91</div></div>
<div class="ttc" id="alayoutfwd_8h_html_aeeb8561be33c83bd9a89bcaecf0ccbb8"><div class="ttname"><a href="layoutfwd_8h.html#aeeb8561be33c83bd9a89bcaecf0ccbb8">ReactionGlyph_t</a></div><div class="ttdeci">class ReactionGlyph ReactionGlyph_t</div><div class="ttdef"><b>Definition:</b> layoutfwd.h:89</div></div>
<div class="ttc" id="asbmlfwd_8h_html_ad725f68d30137fe401efd64d159f84b6"><div class="ttname"><a href="sbmlfwd_8h.html#ad725f68d30137fe401efd64d159f84b6">CLASS_OR_STRUCT</a></div><div class="ttdeci">#define CLASS_OR_STRUCT</div><div class="ttdoc">Defined as a class when compiling for C++ and as a C struct when compiling for C.</div><div class="ttdef"><b>Definition:</b> sbmlfwd.h:62</div></div>
</div><!-- fragment --><h1><a class="anchor" id="header-file"></a>
7. Implement a package header file</h1>
<p>Create a single header file that includes all other package header files necessary to declare the types defined by the package extension. In the directory structure for packages (Section <a class="el" href="libsbml-howto-implement-extension.html#implem-dir"><ol type="1">
<li>Create the directory structure</li>
</ol>
</a>), this file should be placed in the subdirectory named <code>common</code>. Here is an example from the Layout package; this can be found in the file <code>src/packages/layout/common/LayoutExtensionTypes.h</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifndef LayoutExtensionTypes_h</span></div>
<div class="line"><span class="preprocessor">#define LayoutExtensionTypes_h</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="layoutfwd_8h.html">sbml/packages/layout/common/layoutfwd.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_layout_extension_8h.html">sbml/packages/layout/extension/LayoutExtension.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_layout_model_plugin_8h.html">sbml/packages/layout/extension/LayoutModelPlugin.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_layout_s_b_m_l_document_plugin_8h.html">sbml/packages/layout/extension/LayoutSBMLDocumentPlugin.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_bounding_box_8h.html">sbml/packages/layout/sbml/BoundingBox.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_compartment_glyph_8h.html">sbml/packages/layout/sbml/CompartmentGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_cubic_bezier_8h.html">sbml/packages/layout/sbml/CubicBezier.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_curve_8h.html">sbml/packages/layout/sbml/Curve.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_dimensions_8h.html">sbml/packages/layout/sbml/Dimensions.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_graphical_object_8h.html">sbml/packages/layout/sbml/GraphicalObject.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_layout_8h.html">sbml/packages/layout/sbml/Layout.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_line_segment_8h.html">sbml/packages/layout/sbml/LineSegment.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_point_8h.html">sbml/packages/layout/sbml/Point.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_reaction_glyph_8h.html">sbml/packages/layout/sbml/ReactionGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_species_glyph_8h.html">sbml/packages/layout/sbml/SpeciesGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_species_reference_glyph_8h.html">sbml/packages/layout/sbml/SpeciesReferenceGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_species_reference_role_8h.html">sbml/packages/layout/sbml/SpeciesReferenceRole.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_text_glyph_8h.html">sbml/packages/layout/sbml/TextGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_reference_glyph_8h.html">sbml/packages/layout/sbml/ReferenceGlyph.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_general_glyph_8h.html">sbml/packages/layout/sbml/GeneralGlyph.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#endif  </span><span class="comment">/* LayoutExtensionTypes_h */</span><span class="preprocessor"></span></div>
<div class="ttc" id="a_bounding_box_8h_html"><div class="ttname"><a href="_bounding_box_8h.html">BoundingBox.h</a></div><div class="ttdoc">Definition of BoundingBox for SBML Layout.</div></div>
<div class="ttc" id="a_compartment_glyph_8h_html"><div class="ttname"><a href="_compartment_glyph_8h.html">CompartmentGlyph.h</a></div><div class="ttdoc">Definition of CompartmentGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_cubic_bezier_8h_html"><div class="ttname"><a href="_cubic_bezier_8h.html">CubicBezier.h</a></div><div class="ttdoc">Definition of CubicBezier for SBML Layout.</div></div>
<div class="ttc" id="a_curve_8h_html"><div class="ttname"><a href="_curve_8h.html">Curve.h</a></div><div class="ttdoc">Definition of Curve for SBML Layout.</div></div>
<div class="ttc" id="a_dimensions_8h_html"><div class="ttname"><a href="_dimensions_8h.html">Dimensions.h</a></div><div class="ttdoc">Definition of Dimensions for SBML Layout.</div></div>
<div class="ttc" id="a_general_glyph_8h_html"><div class="ttname"><a href="_general_glyph_8h.html">GeneralGlyph.h</a></div><div class="ttdoc">Definition of GeneralGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_graphical_object_8h_html"><div class="ttname"><a href="_graphical_object_8h.html">GraphicalObject.h</a></div><div class="ttdoc">Definition of GraphicalObject for SBML Layout.</div></div>
<div class="ttc" id="a_layout_8h_html"><div class="ttname"><a href="_layout_8h.html">Layout.h</a></div><div class="ttdoc">Definition of Layout for SBML Layout.</div></div>
<div class="ttc" id="a_layout_extension_8h_html"><div class="ttname"><a href="_layout_extension_8h.html">LayoutExtension.h</a></div><div class="ttdoc">Definition of LayoutExtension, the core module of layout package.</div></div>
<div class="ttc" id="a_layout_model_plugin_8h_html"><div class="ttname"><a href="_layout_model_plugin_8h.html">LayoutModelPlugin.h</a></div><div class="ttdoc">Definition of LayoutModelPlugin, the plugin class of layout package for Model element.</div></div>
<div class="ttc" id="a_layout_s_b_m_l_document_plugin_8h_html"><div class="ttname"><a href="_layout_s_b_m_l_document_plugin_8h.html">LayoutSBMLDocumentPlugin.h</a></div><div class="ttdoc">Implementation of the LayoutSBMLDocumentPlugin class.</div></div>
<div class="ttc" id="a_line_segment_8h_html"><div class="ttname"><a href="_line_segment_8h.html">LineSegment.h</a></div><div class="ttdoc">Definition of LineSegment for SBML Layout.</div></div>
<div class="ttc" id="a_point_8h_html"><div class="ttname"><a href="_point_8h.html">Point.h</a></div><div class="ttdoc">Definition of Point for SBML Layout.</div></div>
<div class="ttc" id="a_reaction_glyph_8h_html"><div class="ttname"><a href="_reaction_glyph_8h.html">ReactionGlyph.h</a></div><div class="ttdoc">Definition of ReactionGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_reference_glyph_8h_html"><div class="ttname"><a href="_reference_glyph_8h.html">ReferenceGlyph.h</a></div><div class="ttdoc">Definition of ReferenceGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_species_glyph_8h_html"><div class="ttname"><a href="_species_glyph_8h.html">SpeciesGlyph.h</a></div><div class="ttdoc">Definition of SpeciesGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_species_reference_glyph_8h_html"><div class="ttname"><a href="_species_reference_glyph_8h.html">SpeciesReferenceGlyph.h</a></div><div class="ttdoc">Definition of SpeciesReferenceGlyph for SBML Layout.</div></div>
<div class="ttc" id="a_species_reference_role_8h_html"><div class="ttname"><a href="_species_reference_role_8h.html">SpeciesReferenceRole.h</a></div><div class="ttdoc">Definition of SpeciesReferenceRole enum for SBML Layout.</div></div>
<div class="ttc" id="a_text_glyph_8h_html"><div class="ttname"><a href="_text_glyph_8h.html">TextGlyph.h</a></div><div class="ttdoc">Definition of TextGlyph for SBML Layout.</div></div>
<div class="ttc" id="alayoutfwd_8h_html"><div class="ttname"><a href="layoutfwd_8h.html">layoutfwd.h</a></div><div class="ttdoc">C Structure declarations for SBML Layout.</div></div>
</div><!-- fragment --><h1><a class="anchor" id="config-macros"></a>
8. Define files for package registration</h1>
<p>Two files need to be created in <code>src/sbml/packages</code> as part of the libSBML scheme for including packages at compilation time. The first file should be named <code><span class="placeholder">name</span>-register.h</code>, where <code><span class="placeholder">name</span></code> is the name of the package extension. Here is an example from the Groups package, in the file <code>src/sbml/packages/groups-register.h</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef USE_GROUPS</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_groups_extension_8h.html">sbml/packages/groups/extension/GroupsExtension.h</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#endif  </span></div>
<div class="ttc" id="a_groups_extension_8h_html"><div class="ttname"><a href="_groups_extension_8h.html">GroupsExtension.h</a></div><div class="ttdoc">Definition of GroupsExtension.</div></div>
</div><!-- fragment --><p>Note the contents in the file above: it includes the extension file in the package source directory (<code>GroupExtension.h</code>), and it uses a <code>ifdef</code> condition on a variable named <code>USE_<span class="placeholder">NAME</span></code>, where <code><span class="placeholder">NAME</span></code> is the package name.</p>
<p>The second file should be named <code><span class="placeholder">name</span>-register.cxx</code>. It will be used as an inclusion by another part of libSBML to invoke the <code>init()</code> method of the class created in step&#160;4 above (<a class="el" href="libsbml-howto-implement-extension.html#implem-sbmlext"><ol type="1">
<li>Derive a class from SBMLExtension</li>
</ol>
</a>). This file should have content as shown in the next example taken from <code>src/sbml/packages/groups-register.cxx</code>:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#ifdef USE_GROUPS</span></div>
<div class="line">GroupsExtension::init();</div>
<div class="line"><span class="preprocessor">#endif  </span></div>
</div><!-- fragment --><h1><a class="anchor" id="hook-bindings"></a>
9. Hook into the language bindings</h1>
<p>This part of the process is unfortunately one of the most complex to perform and to describe. The simplest approach is to copy the files from an existing package implementation and modify them to work with the names and objects defined in the new package. The following are the relevant language binding files for C#, Java, Perl, Python, R and Ruby for a package such as Groups:</p>
<pre class="fragment">src/bindings/csharp/local-downcast-extension-groups.i
src/bindings/csharp/local-downcast-namespaces-groups.i
src/bindings/csharp/local-packages-groups.i

src/bindings/java/local-downcast-extension-groups.i
src/bindings/java/local-downcast-namespaces-groups.i
src/bindings/java/local-packages-groups.i

src/bindings/perl/local-downcast-extension-groups.cpp
src/bindings/perl/local-downcast-namespaces-groups.cpp
src/bindings/perl/local-downcast-packages-groups.cpp
src/bindings/perl/local-downcast-plugins-groups.cpp
src/bindings/perl/local-groups.i

src/bindings/python/local-downcast-extension-groups.cpp
src/bindings/python/local-downcast-namespaces-groups.cpp
src/bindings/python/local-downcast-packages-groups.cpp
src/bindings/python/local-downcast-plugins-groups.cpp
src/bindings/python/local-groups.i

src/bindings/r/local-downcast-extension-groups.cpp
src/bindings/r/local-downcast-namespaces-groups.cpp
src/bindings/r/local-downcast-packages-groups.cpp
src/bindings/r/local-downcast-plugins-groups.cpp
src/bindings/r/local-groups.i

src/bindings/ruby/local-downcast-extension-groups.cpp
src/bindings/ruby/local-downcast-namespaces-groups.cpp
src/bindings/ruby/local-downcast-packages-groups.cpp
src/bindings/ruby/local-downcast-plugins-groups.cpp
src/bindings/ruby/local-groups.i

src/bindings/swig/groups-package.h
src/bindings/swig/groups-package.i
</pre><h1><a class="anchor" id="hook-build"></a>
10. Hook into the libSBML build system</h1>
<p>Inclusion and compilation of packages in libSBML is supported through the use of the CMake system. To connect a new package extension to the rest of the libSBML build system, two CMake files have to be created: (1) a CMake file to compile the various parts of the package implementation, and (2) a CMake file that connects the package to the rest of the libSBML build system.</p>
<ol>
<li>
<p class="startli"><em>CMake file to compile the package code</em>. Create a <code><span class="placeholder">name</span>-package.cmake</code> file at the top level of the libSBML source tree, <code>/src</code>, where <span class="placeholder">name</span> is the name of the package. Here is an example of the <code>groups-package.cmake</code> file from the Groups package: </p><div class="fragment"><div class="line">if(ENABLE_GROUPS)</div>
<div class="line">  include(${LIBSBML_ROOT_SOURCE_DIR}/groups-package.cmake)</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Go through all the Groups directories and build a list of files.</span></div>
<div class="line">  set(GROUPS_SOURCES)</div>
<div class="line">  foreach(dir common extension sbml validator)</div>
<div class="line">    include_directories(${CMAKE_CURRENT_SOURCE_DIR}/sbml/packages/groups/${dir})</div>
<div class="line"> </div>
<div class="line">    file(GLOB current ${CMAKE_CURRENT_SOURCE_DIR}/sbml/packages/groups/${dir}/*.cpp</div>
<div class="line">                      ${CMAKE_CURRENT_SOURCE_DIR}/sbml/packages/groups/${dir}/*.c</div>
<div class="line">                      ${CMAKE_CURRENT_SOURCE_DIR}/sbml/packages/groups/${dir}/*.h)</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Special handling for the validator: set the *Constraints.cpp files to be</span></div>
<div class="line">    <span class="comment"># &#39;header&#39; files so they won&#39;t be compiled. They are #included directly instead.</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<span class="stringliteral">&quot;${dir}&quot;</span> STREQUAL <span class="stringliteral">&quot;validator/constraints&quot;</span>)</div>
<div class="line">      foreach(tempFile ${current})</div>
<div class="line">        <span class="keywordflow">if</span> (<span class="stringliteral">&quot;${tempFile}&quot;</span> MATCHES <span class="stringliteral">&quot;.*Constraints.cpp&quot;</span>)</div>
<div class="line">          set_source_files_properties(</div>
<div class="line">            ${tempFile}</div>
<div class="line">            PROPERTIES HEADER_FILE_ONLY true</div>
<div class="line">            )</div>
<div class="line">        endif()</div>
<div class="line">      endforeach()</div>
<div class="line">    endif()</div>
<div class="line"> </div>
<div class="line">    set(GROUPS_SOURCES ${GROUPS_SOURCES} ${current})</div>
<div class="line">    </div>
<div class="line">    <span class="comment"># Mark header files for installation.</span></div>
<div class="line">    file(GLOB groups_headers ${CMAKE_CURRENT_SOURCE_DIR}/sbml/packages/groups/${dir}/*.h)</div>
<div class="line">    install(FILES ${groups_headers} DESTINATION include/sbml/packages/groups/${dir} )</div>
<div class="line">  endforeach()</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Create source group files for IDEs.</span></div>
<div class="line">  source_group(groups_package FILES ${GROUPS_SOURCES})</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Add the Groups package sources to libSBML sources.</span></div>
<div class="line">  SET(LIBSBML_SOURCES ${LIBSBML_SOURCES} ${GROUPS_SOURCES})</div>
<div class="line"> </div>
<div class="line">  <span class="comment"># Add unit test files.</span></div>
<div class="line">  if(WITH_CHECK)</div>
<div class="line">    add_subdirectory(sbml/packages/groups/extension/test)</div>
<div class="line">  endif()</div>
<div class="line"> </div>
<div class="line">endif()</div>
</div><!-- fragment --> <p class="endli"></p>
</li>
<li>
<p class="startli"><em>CMake file to connect the package to the rest of libSBML's build system</em>. In the libSBML top-level, create another (different) file named <code><span class="placeholder">name</span>-package.cmake</code>, where <span class="placeholder">name</span> is the name of the package. The file should contain code that looks like the following, where this example is drawn from the Layout package:</p>
<div class="fragment"><div class="line">option(ENABLE_GROUPS</div>
<div class="line"><span class="stringliteral">&quot;Enable libSBML support for the SBML Level 3 Groups (&#39;groups&#39;) package.&quot;</span> OFF)</div>
<div class="line"> </div>
<div class="line"><span class="preprocessor"># Provide summary status                                    =</span></div>
<div class="line">list(APPEND LIBSBML_PACKAGE_SUMMARY <span class="stringliteral">&quot;SBML &#39;groups&#39; package  = ${ENABLE_GROUPS}&quot;</span>)</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span>(ENABLE_GROUPS)</div>
<div class="line">  add_definitions(-DUSE_GROUPS)</div>
<div class="line">  set(LIBSBML_PACKAGE_INCLUDES ${LIBSBML_PACKAGE_INCLUDES} <span class="stringliteral">&quot;LIBSBML_HAS_PACKAGE_GROUPS&quot;</span>)</div>
<div class="line">  list(APPEND SWIG_EXTRA_ARGS -DUSE_GROUPS)</div>
<div class="line">  list(APPEND SWIG_SWIGDOCDEFINES --define USE_GROUPS)</div>
<div class="line">endif()</div>
</div><!-- fragment --><p class="interli">An implementation starting with the code above could simply replace the string <code>GROUPS</code> with the appropriate name of the package. </p>
<p class="endli"></p>
</li>
</ol>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for Doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Visit <a href="http://sbml.org">SBML.org</a> for more information
    about SBML and libSBML.
    </li>
   </ul>
</div>
</body>
</html>
