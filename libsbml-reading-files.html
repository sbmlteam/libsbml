<!-- HTML header for Doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>libSBML C++ API: Reading and writing SBML content</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="sbml.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="libsbml-doxygen-stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libSBML C++ API
   &#160;<span id="projectnumber">5.20.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('libsbml-reading-files.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Reading and writing SBML content </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#rf-started">Getting started: the 1-minute introduction</a></li>
<li class="level1"><a href="#rf-reading">Reading SBML</a></li>
<li class="level1"><a href="#rf-sbmldocument">The SBMLDocument container</a></li>
<li class="level1"><a href="#rf-writing">Writing SBML</a></li>
</ul>
</div>
<div class="textblock"><p>This section summarizes how to read and write SBML content using the facilities provided by libSBML.</p>
<p>This is only a basic orientation to these essential facilities of libSBML, and is far from exhaustive in its coverage. Readers are directed to the rest of this manual for more details about using libSBML's many features and facilities. Please use the navigation bar near the top of the page and the table of contents in the left-hand column for navigating to other parts of this manual.</p>
<h1><a class="anchor" id="rf-started"></a>
Getting started: the 1-minute introduction</h1>
<p>LibSBML provides the class <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> as a top-level container for storing SBML content and data associated with it (such as warnings and error messages). Here is a simple example to start this discussion: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="_s_b_m_l_types_8h.html">sbml/SBMLTypes.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span></div>
<div class="line">main (<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="class_s_b_m_l_document.html">SBMLDocument</a>* document = <a class="code" href="_s_b_m_l_reader_8h.html#a638d6486ad221b01e62d2d15d130a04e">readSBML</a>(argv[1]);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> errors = document-&gt;<a class="code" href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">getNumErrors</a>();</div>
<div class="line"> </div>
<div class="line">  cout &lt;&lt; endl;</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;  filename: &quot;</span> &lt;&lt; argv[1] &lt;&lt; endl;</div>
<div class="line">  cout &lt;&lt; <span class="stringliteral">&quot;  error(s): &quot;</span> &lt;&lt; errors  &lt;&lt; endl;</div>
<div class="line">  cout &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">if</span> (errors &gt; 0) document-&gt;<a class="code" href="class_s_b_m_l_document.html#a4ba64417bb8900acc865a4bb3319a4d2">printErrors</a>(cerr);</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> errors;</div>
<div class="line">}</div>
<div class="ttc" id="a_s_b_m_l_reader_8h_html_a638d6486ad221b01e62d2d15d130a04e"><div class="ttname"><a href="_s_b_m_l_reader_8h.html#a638d6486ad221b01e62d2d15d130a04e">readSBML</a></div><div class="ttdeci">SBMLDocument_t * readSBML(const char *filename)</div><div class="ttdoc">Reads an SBML document from the given file.</div></div>
<div class="ttc" id="a_s_b_m_l_types_8h_html"><div class="ttname"><a href="_s_b_m_l_types_8h.html">SBMLTypes.h</a></div><div class="ttdoc">Include all SBML types in a single header file.</div></div>
<div class="ttc" id="aclass_s_b_m_l_document_html"><div class="ttname"><a href="class_s_b_m_l_document.html">SBMLDocument</a></div><div class="ttdef"><b>Definition:</b> SBMLDocument.h:349</div></div>
<div class="ttc" id="aclass_s_b_m_l_document_html_a0e23df07740aba0d0aa44a88f8a8f5b1"><div class="ttname"><a href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">SBMLDocument::getNumErrors</a></div><div class="ttdeci">unsigned int getNumErrors() const</div><div class="ttdoc">Returns the number of errors or warnings encountered during parsing, consistency checking,...</div><div class="ttdef"><b>Definition:</b> SBMLDocument.cpp:1163</div></div>
<div class="ttc" id="aclass_s_b_m_l_document_html_a4ba64417bb8900acc865a4bb3319a4d2"><div class="ttname"><a href="class_s_b_m_l_document.html#a4ba64417bb8900acc865a4bb3319a4d2">SBMLDocument::printErrors</a></div><div class="ttdeci">void printErrors(std::ostream &amp;stream=std::cerr) const</div><div class="ttdoc">Prints all the errors or warnings encountered trying to parse, check, or translate this SBML document...</div><div class="ttdef"><b>Definition:</b> SBMLDocument.cpp:1186</div></div>
</div><!-- fragment --><p> The code above illustrates probably the simplest possible use of libSBML: reading a model and printing any errors or warnings encountered. The code begins with the inclusion of a single SBML header file, <a class="el" href="_s_b_m_l_types_8h.html" title="Include all SBML types in a single header file.">SBMLTypes.h</a>, which serves to include most of the other useful libSBML individual header files. Next, in the body of the main function, the line </p><div class="fragment"><div class="line"><a class="code" href="class_s_b_m_l_document.html">SBMLDocument</a>* document = <a class="code" href="_s_b_m_l_reader_8h.html#a638d6486ad221b01e62d2d15d130a04e">readSBML</a>(argv[1]);</div>
</div><!-- fragment --><p> reads in a file and returns a pointer to an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object. A subsequent call to the method <a class="el" href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">getNumErrors() </a> on that object returns the number of errors encountered (if any), and a call to <a class="el" href="class_s_b_m_l_document.html#a4ba64417bb8900acc865a4bb3319a4d2">printErrors() </a> method prints the errors (if any) to the C++ standard error output stream.</p>
<h1><a class="anchor" id="rf-reading"></a>
Reading SBML</h1>
<p>SBML may be read from a file or an in-memory character string into an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object. LibSBML defines two basic, convenient, global functions (not methods on a specific object class, but global functions in the classic C programming sense) for reading SBML:</p>
<ul>
<li><code>SBMLDocument* <a class="el" href="_s_b_m_l_reader_8h.html#a433392e83590602299af5c058833a82d" title="Reads an SBML document from the given file.">readSBMLFromFile(const char* filename)</a></code>. This function takes a file name, attempts to read an SBML document from the file, and returns a pointer to an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object if successful. </li>
<li><code>SBMLDocument* <a class="el" href="_s_b_m_l_reader_8h.html#a97a991c5338252bf5d210d5709a6945c" title="Reads an SBML document from a text string.">readSBMLFromString(const char* xml)</a></code>. This function takes a string containing XML content, attempts to read an SBML document from the string, and returns a pointer to an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object if successful.</li>
</ul>
<p>The model may be in any SBML Level and Version combination. LibSBML implements an unified object model for SBML that encompasses all SBML Levels, so applications generally do not need to worry about differences in syntax between these definitions of SBML when reading and writing models. (However, applications still need to be concerned about the <em>constructs</em> used and how they are interpreted, since there are substantial differences between SBML Level&#160;1, Level&#160;2, and Level&#160;3!)</p>
<h1><a class="anchor" id="rf-sbmldocument"></a>
The SBMLDocument container</h1>
<p>As might be deduced from the examples so far, an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object in libSBML represents a whole SBML model and its associated data. <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> corresponds roughly to the class <em>SBML</em> (respectively, <em>Sbml</em>) defined in the specification for SBML Level&#160;3 (respectively, Level&#160;2), but it does not have a direct correspondence in SBML Level&#160;1. (Nevertheless, it is created by libSBML no matter whether the model is Level&#160;1, Level&#160;2 or Level&#160;3.)</p>
<p><a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> is derived from <a class="el" href="class_s_base.html">SBase</a>, so that it contains the usual <a class="el" href="class_s_base.html">SBase</a> attributes (in SBML Level&#160;2 and&#160;3) of "metaid" and "sboTerm", as well as the subelements "notes" and "annotation". It also contains the attributes "level" and "version" indicating the Level and Version of the SBML content that was read. <a class="el" href="class_s_base.html">SBase</a> (and thus its subclasses such as <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a>) provides methods for querying this information:</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_base.html#af0a70ab6f715e912c6431072c4339f2c">getLevel()</a></code> on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object returns the SBML Level of the model. </li>
<li><code>unsigned int <a class="el" href="class_s_base.html#aed8f42e0f220bd85af8d01b51d87aeff">getVersion()</a></code> on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object returns the SBML Version within the Level of the model.</li>
</ul>
<p>Of course, the whole point of reading an SBML file or data stream is to get at the SBML model it contains. The following method allows access to the <a class="el" href="class_model.html">Model</a> object within an SBML document:</p>
<ul>
<li><code>Model* <a class="el" href="class_s_b_m_l_document.html#a251eb8a1e652a233b5dc7fabe48a6a69">getModel()</a></code> on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object returns a <a class="el" href="class_model.html">Model</a> object representing the SBML model contained within that <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object.</li>
</ul>
<p><a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> also acts to log any problems encountered while reading the model from the file or data stream. Whether the problems are warnings or errors, they are reported through a single common interface involving the object class <a class="el" href="class_s_b_m_l_error.html">SBMLError</a>. The example earlier on this page already showed some of the methods available for accessing errors and warnings; here is a slightly more complete list:</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">getNumErrors()</a></code> on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object returns a count of the diagnostic messages logged while attempting to read an SBML model using either <code><a class="el" href="class_s_b_m_l_reader.html#a1a6a86ebaf0a83de711ee401bd1c44f1" title="Reads an SBML document from the given file.">SBMLReader::readSBMLFromFile(const std::string&amp; filename)</a></code> or <code><a class="el" href="class_s_b_m_l_reader.html#a58485b5e433e56300b83f84a03c91307" title="Reads an SBML document from a text string.">SBMLReader::readSBMLFromString(const std::string&amp; xml)</a></code>. </li>
<li><code>const SBMLError* <a class="el" href="class_s_b_m_l_document.html#a412aa5420aa21531826c16d270a5f5e0">getError(unsigned int n)</a></code> returns a specific error indexed by the integer <code>n</code>. (Callers should first use <code><a class="el" href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">getNumErrors()</a></code> to get the number of errors, so that they can know the range of valid index numbers.) The <a class="el" href="class_s_b_m_l_error.html">SBMLError</a> object class provides methods for assessing the severity of the problem encountered and for finding out the line and column number of where the problem occurred in the SBML input. </li>
<li><code>void <a class="el" href="class_s_b_m_l_document.html#a4ba64417bb8900acc865a4bb3319a4d2">printErrors(std::ostream&amp; stream = std::cerr)</a></code> on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object prints all of the diagnostics to the given output stream, defaulting to the standard error stream if no stream argument is given in the call.</li>
</ul>
<p>Finally, another set of <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> methods worth mentioning in the context of reading SBML are those for running consistency-checking and validation rules on the SBML content. These methods assess whether the SBML is legal according to basic rules listed in the SBML Level&#160;2 and Level&#160;3 specification documents. Note that they are mostly structural checks, in the sense that they can indicate whether the SBML is properly constructed; they cannot tell if a model is nonsense. (But at least they can assess whether it's syntactically correct nonsense!).</p>
<ul>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a25684f139b8f5e44ec2089eba3fdfda0">checkConsistency()</a></code>, invoked on an <a class="el" href="class_s_b_m_l_document.html">SBMLDocument</a> object, performs a set of structural and mathematical checks on the SBML content and reports the number of failed checks (errors) encountered. Callers may use <code><a class="el" href="class_s_b_m_l_document.html#a0e23df07740aba0d0aa44a88f8a8f5b1">getNumErrors()</a></code> and <code><a class="el" href="class_s_b_m_l_document.html#a412aa5420aa21531826c16d270a5f5e0">getError(unsigned int n)</a></code> interfaces to examine the individual errors. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a4d74bae94611c12f9b87204574db2e14">checkL1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#ade9b66aba44df83de0f8444ec31bf471">checkL2v1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version 1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#acec9543bcc182476c238a5c718886859">checkL2v2Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;2, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a9f467fa1bd1663f0eb44dcfc4a52b33f">checkL2v3Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;3, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a71fdd064c00ab9cf405a9cb3f2213804">checkL2v4Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;2 Version&#160;4, and returns the number of failures. If all the checks succeed, it returns <code>0</code>. </li>
<li><code>unsigned int <a class="el" href="class_s_b_m_l_document.html#a842114111ebe4cc7c13609b0cbfc9ff1">checkL3v1Compatibility()</a></code> peforms a set of semantic consistency checks on the document to establish whether it can be converted to SBML Level&#160;3 Version&#160;1, and returns the number of failures. If all the checks succeed, it returns <code>0</code>.</li>
</ul>
<p>At the time of this release of libSBML, the most recent release of SBML is Level&#160;3 Version&#160;2 Core Release&#160;2.</p>
<h1><a class="anchor" id="rf-writing"></a>
Writing SBML</h1>
<p>Writing SBML is, in the end, a very simple matter in libSBML. The library provides the class <a class="el" href="class_s_b_m_l_writer.html">SBMLWriter</a> for this purpose, and <a class="el" href="class_s_b_m_l_writer.html">SBMLWriter</a> offers the following methods:</p>
<ul>
<li><code>bool <a class="el" href="class_s_b_m_l_writer.html#a7c0ef141939d0c1928fe95ac4d3d193a" title="Writes the given SBML document to filename.">SBMLWriter::writeSBMLToFile(const SBMLDocument* d, const std::string&amp; filename)</a></code> writes the given SBML document to the named file and returns either <code>true</code> on success or <code>false</code> on failure. Reasons for failure can be, for example, that the named file could not be opened for writing. </li>
<li><code>char* <a class="el" href="class_s_b_m_l_writer.html#a9d79b93e0f69117ba909b772aee6a9bc" title="Writes the given SBML document to an in-memory string and returns a pointer to it.">SBMLWriter::writeSBMLToString(const SBMLDocument* d)</a> </code> writes the given SBML document to a character string and returns a pointer to it, or returns <code>NULL</code> if a failure occurred. The string is owned by the caller and should be freed (using the standard C function <code>free()</code>) after it is no longer needed. </li>
<li><code>bool <a class="el" href="class_s_b_m_l_writer.html#afbd37201ad52b3b1665b162297ea3052" title="Writes the given SBML document to the output stream.">SBMLWriter::writeSBML(const SBMLDocument* d, std::ostream&amp; stream)</a></code> writes the given SBML document to the given output stream and returns either <code>true</code> on success or <code>false</code> on failure. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for Doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Visit <a href="http://sbml.org">SBML.org</a> for more information
    about SBML and libSBML.
    </li>
   </ul>
</div>
</body>
</html>
