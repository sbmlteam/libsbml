<?xml version="1.0" encoding="UTF-8"?>
<sbml xmlns="http://www.sbml.org/sbml/level3/version1/core" xmlns:comp="http://www.sbml.org/sbml/level3/version1/comp/version1" level="3" version="1" comp:required="true">
  <model id="main">
    <listOfCompartments>
      <compartment id="C" spatialDimensions="3" size="10" constant="false">
 <!--       <comp:listOfReplacedElements>
          <comp:replacedElement comp:idRef="sub1" comp:submodelRef="sub2">
            <comp:sBaseRef comp:idRef="C1"/>
          </comp:replacedElement>
        </comp:listOfReplacedElements>
-->      </compartment>
    </listOfCompartments>
    <listOfSpecies>
      <species id="S1" compartment="C" initialAmount="5" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false">
        <comp:listOfReplacedElements>
          <comp:replacedElement comp:idRef="moddef3_sub2" comp:submodelRef="sub3">
            <comp:sBaseRef comp:idRef="moddef2_sub1">
              <comp:sBaseRef comp:idRef="__C">
                <comp:sBaseRef comp:idRef="S2"/>               
              </comp:sBaseRef>
              </comp:sBaseRef>
          </comp:replacedElement>
        </comp:listOfReplacedElements>
      </species>
    </listOfSpecies>
    <comp:listOfSubmodels>
      <comp:submodel comp:id="sub1" comp:modelRef="moddef1"/>
      <comp:submodel comp:id="sub2" comp:modelRef="moddef2"/>
      <comp:submodel comp:id="sub3" comp:modelRef="moddef3"/>
    </comp:listOfSubmodels>
    <comp:listOfPorts>
      <comp:port comp:idRef="C" comp:id="C_port"/>
      <comp:port comp:idRef="sub3" comp:id="C2_port">
<!--        <comp:sBaseRef comp:idRef="sub2">
          <comp:sBaseRef comp:idRef="sub1">
            <comp:sBaseRef comp:idRef="C"/>
          </comp:sBaseRef>
        </comp:sBaseRef>
-->      </comp:port>
    </comp:listOfPorts>
  </model>
  <comp:listOfModelDefinitions>
    <comp:modelDefinition id="moddef1">
      <listOfCompartments>
        <compartment id="C1" spatialDimensions="3" size="1" constant="false" metaid="__C"/>
      </listOfCompartments>
      <listOfSpecies>
        <species id="S1" compartment="C1" initialConcentration="2.5" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false"/>
      </listOfSpecies>
      <comp:listOfSubmodels>
        <comp:submodel comp:id="any" metaid="__moddef1_sub1" comp:modelRef="moddef4"/>
      </comp:listOfSubmodels>
    </comp:modelDefinition>
    <comp:modelDefinition id="moddef2">
      <listOfCompartments>
        <compartment id="C2" spatialDimensions="3" size="1" constant="false" metaid="__C"/>
      </listOfCompartments>
      <listOfSpecies>
        <species id="S2" compartment="C2" initialAmount="9" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false"/>
      </listOfSpecies>
      <comp:listOfSubmodels>
        <comp:submodel comp:id="moddef2_sub1" comp:modelRef="moddef1"/>
      </comp:listOfSubmodels>
    </comp:modelDefinition>
    <comp:modelDefinition id="moddef3">
      <listOfCompartments>
        <compartment id="C3" spatialDimensions="3" size="1" constant="false"/>
      </listOfCompartments>
      <listOfSpecies>
        <species id="S3" compartment="C3" initialAmount="11" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false"/>
      </listOfSpecies>
      <comp:listOfSubmodels>
        <comp:submodel comp:id="moddef3_sub1" comp:modelRef="moddef1"/>
        <comp:submodel comp:id="moddef3_sub2" comp:modelRef="moddef2"/>
      </comp:listOfSubmodels>
    </comp:modelDefinition>
    <comp:modelDefinition id="moddef4">
      <listOfCompartments>
        <compartment id="C4" spatialDimensions="3" size="1" constant="false"/>
      </listOfCompartments>
      <listOfSpecies>
        <species id="S4" compartment="C4" initialConcentration="2.5" hasOnlySubstanceUnits="false" boundaryCondition="false" constant="false"/>
      </listOfSpecies>
    </comp:modelDefinition>
  </comp:listOfModelDefinitions>
</sbml>
