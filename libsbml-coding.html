<!-- HTML header for Doxygen -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>libSBML C++ API: Documentation conventions for libSBML</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="sbml.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js"></script>
<link href="libsbml-doxygen-stylesheet.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">libSBML C++ API
   &#160;<span id="projectnumber">5.20.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('libsbml-coding.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Documentation conventions for libSBML </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#coding-intro">1. Introduction</a></li>
<li class="level1"><a href="#coding-basic">2. Basic guidelines for libSBML</a></li>
<li class="level1"><a href="#coding-docs">3. Guidelines for different file types</a><ul><li class="level2"><a href="#coding-doc-h">3.1 Guidelines for .h files</a></li>
<li class="level2"><a href="#coding-doc-cpp">3.2 Guidelines for .cpp files</a></li>
</ul>
</li>
<li class="level1"><a href="#coding-other-situations">4. Some important common situations</a><ul><li class="level2"><a href="#coding-refs">4.1 Pure functions and constants</a><ul><li class="level3"><a href="#coding-constant-refs">4.1.1 Referring to libSBML constants</a></li>
<li class="level3"><a href="#coding-function-refs">4.1.2 Referring to libSBML pure functions</a></li>
</ul>
</li>
<li class="level2"><a href="#coding-reusing-text">4.2 Reusing common text</a><ul><li class="level3"><a href="#coding-copydetails">4.2.1 Using &quot;@copydetails&quot;</a></li>
<li class="level3"><a href="#coding-copydoc">4.2.2 Using &quot;@copydoc&quot;</a></li>
<li class="level3"><a href="#coding-htmlinclude">4.2.3 Using &quot;@htmlinclude&quot;</a></li>
</ul>
</li>
<li class="level2"><a href="#coding-links">4.3 Links</a></li>
<li class="level2"><a href="#coding-conditionals">4.4 Conditional text</a></li>
<li class="level2"><a href="#coding-common-text">4.5 Notes and warnings</a></li>
<li class="level2"><a href="#coding-figures">4.6 Figures</a></li>
<li class="level2"><a href="#coding-verbatim">4.7 Code and verbatim text</a></li>
</ul>
</li>
<li class="level1"><a href="#coding-doxygen-summary">5. Commonly-used commands</a></li>
<li class="level1"><a href="#coding-doc-process">6. LibSBML&#39;s documentation-generation process</a><ul><li class="level2"><a href="#doc-process-c">6.1 Generating C++ and C docs</a></li>
<li class="level2"><a href="#doc-process-python">6.2 Generating Python docs</a></li>
<li class="level2"><a href="#doc-process-java">6.3 Generating Java docs</a></li>
</ul>
</li>
<li class="level1"><a href="#coding-misc-doxygen">7. Miscellaneous Doxygen notes</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="coding-intro"></a>
1. Introduction</h1>
<p>This document is a collection of guidelines for libSBML authors to follow when writing documentation for libSBML code.</p>
<p>LibSBML's application programming interface (API) is documented using a combination of tools. For almost all languages (C++, C#, C, Python, and others), the cornerstone of the approach is the open-source software tool <a href="http://www.doxygen.org">Doxygen</a>; for Java, we use Javadoc instead. We write the documentation in source code and auxiliary files in a way that both Javadoc and Doxygen can process more or less equally, which requires that programmers and documentation authors follow various conventions described in the rest of this document. In addition, we use various home-grown scripts and programs to massage the output of SWIG to produce something that can be fed to the Doxygen and Javadoc-based processs.</p>
<h1><a class="anchor" id="coding-basic"></a>
2. Basic guidelines for libSBML</h1>
<p>The guidelines presented in this section are oriented towards explaining how to organize code comments such that Doxygen and Javadoc can produce good output, yet simultaneously make the comments in the libSBML code files be readable on their own.</p>
<ul>
<li>Although Doxygen keywords/tags can be prefixed with either <code>@</code> or <code>\\</code>, Javadoc only understands keywords prefixed with <code>@</code>. Consequently, always use the <code>@</code> prefix for keywords so that they will be understood by both Doxygen and Javadoc. </li>
<li>The main types of Doxygen comments consist of a C-style comment block beginning with two asterisks (<code>*</code>) characters, as in the following example: <pre class="fragment">/**
 * Comments that start with two asterisks within which commands
 * understood by Doxygen will begin with the character @.
 */ 
</pre> Another type of Doxygen comment, used to document enumeration members, begins with <code>/*!&lt;</code> . If your code documentation does <em>not</em> appear inside a comment block that begins with  <code>/**</code>  or the more rarely-needed <code>/*!&lt;</code> , then it will be ignored by Doxygen. This may or may not be what you want, depending on the intention behind the comment. </li>
<li>Comments that begin with one asterisk (i.e.,  <code>/* ...</code> , or two forward slashes (i.e., <code>// ...</code>) are <em>not</em> processed by Doxygen and not entered in the formatted user guide. You can use such comments normally to comment the code for other developers. </li>
<li>Doxygen comment blocks can appear at the beginning of a file, in front of a class declaration, in front of method declarations, in front of function declarations, and in front of data structure definitions. </li>
<li>Doxygen reads both <code>.h</code> and <code>.cpp</code> files. If a class member (i.e., a method or data member) has  <code>/**</code>  comment blocks in both the <code>.h</code> and <code>.cpp</code> files, the text is <em>combined</em> in the final output for that class member. This frequently leads to accidentally duplicated text in the final output, and generally is a maintenance headache. To avoid this, and to simplify maintenance of documentation, <b>only put documentation comments in the <code>.h</code> files</b>. </li>
<li>Please write in complete sentences, with correct English grammar and punctuation. <em>Do</em> <em>not</em> treat new lines as new sentences or beginnings of different comments. Here is an example of what should be <em>avoided:</em> <pre class="fragment">/**
 * creates a foo object
 * given arg is the template
 */
</pre> The text above doesn't end sentences with periods, doesn't begin sentences with capitals, doesn't form complete sentences, etc. When Doxygen is used to generate HTML documentation from this, it turns into one long run-on paragraph, and it's unreadable. </li>
<li>We use a feature of Doxygen that makes it use the first sentence of a documentation comment as the "brief" description of the entity being described (which may be a class, a method, a class data member, a function, a typedef, etc.). This means that the first sentence up to a period or a blank line will be pulled out separately and used as a one-line summary in certain contexts by Doxygen. The following is an example: <pre class="fragment">/**
 * This is the brief description.  After the first sentence, even if
 * you continue writing in the same paragraph, the output nevertheless
 * is split after the first sentence such that everything else is part of
 * the detailed description and not the brief one-sentence description.
 * This example would produce two paragraphs in the formatted output:
 * one paragraph containing the first sentence, and the rest of the
 * text in the second paragraph.
 *
 * If you also have a third paragraph separated by a blank line in the
 * comment, like this, then this third paragraph becomes a third paragraph
 * in the output.  This part is what most people would expect would happen.
 */
</pre> Consequently, to emphasize this and remind people that this is going to happen when the API documentation is generated, it is better to format the comment such that there is a paragraph break after the first sentence, as follows: <pre class="fragment">/**
 * This is the brief description.
 *
 * This is the beginning of the detailed description....
 */
</pre> The visual split in the source makes it more obvious what's going to happen. </li>
<li>Doxygen automatically turns entity names it recognizes in text into links to the definition of that entity. This is usually what you want to have happen; for example, when describing the <a class="el" href="class_model.html">Model</a> class, you may mention classes such as <a class="el" href="class_species.html">Species</a> and <a class="el" href="class_compartment.html">Compartment</a>, and those should be turned into convenient links to their definitions in the API documentation. However, sometimes you <em>don't</em> want that to happen. To prevent Doxygen from linking a word, put a percentage sign (%) in front of it, as in <code>%Model</code>. Doxygen will remove the percentage sign and leave the rest of the word unlinked, resulting in the plain word Model appearing in the finished document. </li>
<li>Sometimes methods are meant to be part of the internal implementation and not advertised to users of the library. To make Doxygen ignore methods, wrap their declarations in the <code>.h</code> files with the comment <pre class="fragment">/** @cond doxygenLibsbmlInternal */
</pre> at the beginning and <pre class="fragment">/** @endcond */
</pre> at the end of the block. This is merely a convention used in libSBML and not something that Doxygen defines; we simply use the normal Doxygen conditional test operator <code>@cond</code> and give it a symbol we never define: "doxygenLibsbmlInternal". The symbol name is chosen to suggest the purpose. Note: if there are multiple methods to be marked in this way, <b>wrap them individually</b>, placing the <code>@cond</code> and <code>@endcond</code> pairs immediately before and after each method. This makes it much more likely that a reader will notice what is happening in the source files. The alternative approach (putting single <code>@cond</code> and <code>@endcond</code> pairs around a group of methods) makes it much harder to determine which methods are marked as internal in a file. </li>
<li>If an entire file should be omitted from the user documentation, use the same <code>@cond doxygenLibsbmlInternal</code> method but put the conditional near the top of the file and the <code>@endcond</code> at the very end of the file. In other words, the top of your file should look like this example: <pre class="fragment">/**
 * @cond doxygenLibsbmlInternal
 *
 * @file    ExpatAttributes.cpp
 * @brief   Creates new XMLAttributes from "raw" Expat attributes.
 * ...
</pre></li>
</ul>
<ul>
<li>Always put a <code>@class</code> declaration in every file for every class, even if they are marked as internal using the <code>@cond doxygenLibsbmlInternal</code> method described above. Due to the way our documentation toolchain works, in order for Doxygen and Javadoc to see the markers we insert to indicate internal classes and methods, it is necessary for classes to have an <code>@class</code> declaration <em>even if</em> a file has the <code>@cond doxygenLibsbmlInternal</code> guards around it. In other words, the file still needs to have the <code>@class</code> definition for things to work. The easiest convention to adopt is simply to always put the <code>@class</code> and <code>@sbmlbrief</code> pairs in every class, no matter what. If the file is for internal code, then also put the <code>@cond doxygenLibsbmlInternal</code> around the entire contents inside. The use of <code>@sbmlbrief</code> and <code>@class</code> is discussed further in Section <a class="el" href="libsbml-coding.html#coding-doc-h">3.1 Guidelines for .h files</a> below. </li>
<li>Do <b>not</b> use <code>@retval</code> for describing return values; instead, use <code>@return</code> because (1) it is what Javadoc uses and (2) the narrative form of <code>@return</code> lets you provide more contextual information and other details in describing the return value(s) of a method or function. </li>
<li>Please try to limit the lengths of lines in all files to 79 characters long or less. This makes code and documentation generally easier to read and edit in different software tools. Sometimes it's too difficult to avoid a long line, and then it's okay, but generally it's possible to reformat code in such away as to keep things to 79 characters. </li>
<li>Please write sentences with <em>two</em> (2) spaces after the terminating period, not one. This makes the resulting text easier to read during editing, compared to when sentence-ending periods are followed by only one space. (Note that this concerns the readability and editability of source code, not the appearance of rendered output. The finished typeset output will <em>not</em> have two spaces after every sentence-ending period; it will have one or slightly more than one, depending on the output format produced. The reason two-spacing is important for the source is that most people use monospaced fonts in their text editors and IDEs, and when using monospaced fonts, the ends of sentences are much easier for human eyes to pick out when two-spacing is used. Further, text editing programs such as Emacs and vi have special features to recognize sentences based on this pattern, and proficient users of those editors can make use of sentence-oriented editing commands. This is a convention that some people disagree with. Please use this convention for libSBML anyway.)</li>
</ul>
<h1><a class="anchor" id="coding-docs"></a>
3. Guidelines for different file types</h1>
<p>Below are explanations of how to write documentation for the most common types of files encountered in libSBML.</p>
<h2><a class="anchor" id="coding-doc-h"></a>
3.1 Guidelines for .h files</h2>
<p>It is important to note that the documentation of global functions, variables, typedefs, and enums will only be included in the output of Doxygen if the file they are in is also documented.</p>
<ul>
<li>Here is a template header file suitable for use when creating a new <code>.h</code> file for libSBML (and in fact, it's the same for <code>.cpp</code> files, too). Of course, you should substitute appropriate content for the text in square brackets (<code></code>[ and <code></code>]) below. Note also that the Doxygen keywords <code>@file</code>, <code>@brief</code> and <code>@author</code> are <em>not</em> followed by colon ('<code>:</code>') characters. <pre class="fragment">/**
 * @file    [filename]
 * @brief   [succinct description of what's in this file]
 * @author  [author's name]
 * 
 *&lt;!---------------------------------------------------------------------------
 * This file is part of libSBML.  Please visit http://sbml.org for more
 * information about SBML, and the latest version of libSBML.
 *
 * Copyright (C) 2019 jointly by the following organizations:
 *     1. California Institute of Technology, Pasadena, CA, USA
 *     2. University of Heidelberg, Heidelberg, Germany
 *
 * Copyright (C) 2013-2018 jointly by the following organizations:
 *     1. California Institute of Technology, Pasadena, CA, USA
 *     2. EMBL European Bioinformatics Institute (EMBL-EBI), Hinxton, UK
 *     3. University of Heidelberg, Heidelberg, Germany
 *
 * Copyright (C) 2009-2013 jointly by the following organizations: 
 *     1. California Institute of Technology, Pasadena, CA, USA
 *     2. EMBL European Bioinformatics Institute (EMBL-EBI), Hinxton, UK
 *  
 * Copyright (C) 2006-2008 by the California Institute of Technology,
 *     Pasadena, CA, USA 
 *  
 * Copyright (C) 2002-2005 jointly by the following organizations: 
 *     1. California Institute of Technology, Pasadena, CA, USA
 *     2. Japan Science and Technology Agency, Japan
 * 
 * This library is free software; you can redistribute it and/or modify it
 * under the terms of the GNU Lesser General Public License as published by
 * the Free Software Foundation.  A copy of the license agreement is provided
 * in the file named "LICENSE.txt" included with this software distribution
 * and also available online as http://sbml.org/software/libsbml/license.html
 *----------------------------------------------------------------------- --&gt;*/
</pre> </li>
<li>When more than one author should be acknowledged for a given file, use multiple <code>@author</code> entries, one per line. </li>
<li>A <code>.h</code> file will typically have a class declaration in it. The <em>normal</em>, plain Doxygen way that one would document a class (but we do not do it this way) is to put a comment block immediately in front of the class declaration in the file. However, we have to do it differently because of how our files are used to generate output for multiple language bindings. Thus, for the documentation of classes, <b>please put the documentation in the file header rather that ahead of the class itself</b> in the file. The following example illustrates this procedure (and note how more than one class can be described in the header): <pre class="fragment">/**
 * @file    Compartment.h
 * [...]
 *
 * @class Compartment
 * @sbmlbrief{core} Implementation of SBML's %Compartment construct.
 *
 * A compartment in SBML represents a bounded space in which species 
 * are located.  Compartments do not necessarily have to correspond to
 * ....
 *
 * &lt;!-- ------------------------------------------------------------ --&gt;
 * @class ListOfCompartments
 * @sbmlbrief{core} Implementation of SBML's %ListOfCompartments
 * construct.
 * 
 * The various ListOf___ classes in SBML are merely containers used for
 * ....
 */

#ifndef Compartment_h
#define Compartment_h
...
</pre> </li>
<li>Use the special keyword <code>@sbmlbrief</code> to indicate the SBML Level&#160;3 package to which a class belongs. This keyword takes one argument, a label for the package; for SBML Level&#160;3 Core code, use the label "core". Place the keyword immediately on the line after each <code>@class</code> declaration in the <code>.h</code> file, and then write a brief one-sentence description of the class after the keyword. The example file fragment above demonstrates this. (As you might guess from its name, the keyword <code>@sbmlbrief</code> is something defined by libSBML's documentation-production system and not a standard Doxygen command.) </li>
<li>For each method or data member in the class definition, include a comment block ahead of it, making sure to provide at least a brief description. If it takes parameters, use <code>@param</code> to describe the parameters. If it's a method and the method returns a value, also use <code>@return</code> to describe the returned value. If you also need to refer to the parameters in the textual description of the method, use the <code>@p</code> command. The following example illustrates this: <pre class="fragment">/**
 * Creates a new CompartmentType, optionally with the given @p id and
 * @p name attribute values.
 *
 * In SBML, identifiers are required for CompartmentType objects;
 * however, the identifier does not have to be set at the time of
 * creation of the object, and instead can be set using the setId()
 * method on the SBase parent class.
 *
 * @param id a string, the identifier of this CompartmentType instance
 * @param name a string, the optional name of this
 */
CompartmentType (const std::string&amp; id = "", const std::string&amp; name = "");
</pre> </li>
<li>Please try to leave 2 blank lines between method declarations and other items in the definitions of classes. This makes it easier for the eye to spot transitions between method definitions. Here is an example taken from a class definition in a <code>.h</code> file: <pre class="fragment">class LIBSBML_EXTERN CompartmentType : public SBase
{
public:

  /**
   * Creates a new CompartmentType, optionally with the given @p id and @p
   * name attribute values.
   *
   * In SBML, identifiers are required for CompartmentType objects;
   * however, the identifier does not have to be set at the time of
   * creation of the object, and instead can be set using the setId()
   * method on the SBase parent class.
   *
   * @param id a string, the identifier of this CompartmentType instance
   * @param name a string, the optional name of this
   */
  CompartmentType (const std::string&amp; id = "", const std::string&amp; name = "");


  /**
   * Destroys this CompartmentType.
   */
  virtual ~CompartmentType ();


  /**
   * Copy constructor; creates a copy of this CompartmentType.
   */
  CompartmentType(const CompartmentType&amp; orig);
</pre></li>
</ul>
<h2><a class="anchor" id="coding-doc-cpp"></a>
3.2 Guidelines for .cpp files</h2>
<p>The <code>.cpp</code> files can be handled very similarly to the <code>.h</code> files described above. You may use the same header template shown in the previous section about <code>.h</code> files, and all the same guidelines apply.</p>
<p>As noted above, when the API manual is generated by Doxygen, it will use the comments from the <code>.h</code> file as the source of the documentation for the class and methods. It is therefore unnecessary to repeat the class or other descriptions placed in the <code>.h</code> file. However, do provide normal comments (using either the single-asterisk form or the double-slash form of C++ comments) about the code so that in the future, you and others would read the file can better understand what the code is doing.</p>
<h1><a class="anchor" id="coding-other-situations"></a>
4. Some important common situations</h1>
<p>The descriptions above cover the basics of using Doxygen and Javadoc for libSBML documentation. What follows is a discussion of other, more involved topics.</p>
<h2><a class="anchor" id="coding-refs"></a>
4.1 Pure functions and constants</h2>
<p>This section discusses the special needs of libSBML functions defined outside of any classes, and symbolic constants (both enumerations and <code>#define</code> constants).</p>
<h3><a class="anchor" id="coding-constant-refs"></a>
4.1.1 Referring to libSBML constants</h3>
<p>It's often important to refer to constants such as enumeration values and <code>#define</code>'d symbolic constants. It's very useful to have the names of the constants in the formatted documentation be linked to their definitions, rather than being merely set in a typewriter-style font. However, not only does Doxygen fail to do this automatically, but the link targets need to be different for the different programming languages such as Python, C# and Java. Handling this using plain Doxygen commands leads to a complex and unmaintainable combination of repeated <code>@if clike ... @endif @if java ... @endif @if python ... @endif</code>.</p>
<p>To make it easier to name and link constants consistently, we developed a simple-to-use Doxygen macro that is recognized and treated specially by <code>src/bindings/swig/swigdoc.py</code>. This macro is named <code>@sbmlconstant</code> and takes two required arguments:</p>
<pre class="fragment">
@sbmlconstant{<span class="placeholder-nospace">symbol</span>,<span class="placeholder">type</span>}
</pre><p>The <span class="placeholder">type</span> is the name of the enumeration (if any) where the symbolic value is defined, and <span class="placeholder">symbol</span> is the name of the value. Note that the symbol appears <em>first</em> in the macro. Here follows an example:</p>
<pre class="fragment">
@sbmlconstant{AST_MINUS, ASTNodeType_t}
</pre><p>If the value is a <code>#define</code> constant and not located inside an enumeration, then omit the <span class="placeholder">type</span> argument value; however, <b>leave the comma</b> regardless. For example:</p>
<pre class="fragment">
@sbmlconstant{L3P_COLLAPSE_UNARY_MINUS,}
</pre><p>(The need for the comma is because Doxygen does not support optional arguments in alias/macro definitions. Rather than define two separate forms, it seems simpler to have only one&mdash;i.e., <code>@sbmlconstant</code>&mdash;and simply remember to leave the second argument empty if necessary.)</p>
<p>Finally, sometimes you will want to refer the enumeration type itself rather than a specific value, for example to say something along the lines of "the
values are drawn from the enumeration X". Unfortunately, this poses a portability problem, because the enumerations do not explicitly exist outside of C and C++. The simplest way around this problem is to conditionalize the text such that in the case of <code>clike</code>, the text mentions the enumeration name, and otherwise, the text describes integer constants more generally. The following is an example: <pre class="fragment">
   * This uses integer type codes, which may come from
   * @if clike the enumeration #ASTNodeType_t@else the set
   * of static integer constants whose names begin with the prefix
   * <code>AST_</code> @endif.
</pre>
<p>In the example above, when the condition is not satisfied (meaning, <code>@if clike</code> is false and thus C/C++ documentation is not being generated), the text above will result in the output "This uses integer type codes, which may come from the of static integer constants whose names begin with the prefix <code>AST_</code>". Such a description works for Java, Python and other languages equally, and while it is not as specific as possible, it is better than attempting to a list all the alternatives explicitly.</p>
<h3><a class="anchor" id="coding-function-refs"></a>
4.1.2 Referring to libSBML pure functions</h3>
<p>Some functions in libSBML are defined outside of any class. This poses a special challenge for creating hyperlinks, because the names of the functions and their references are different for Python and Java from the basic C, C++ and C# versions. To stop the unreadable and unmaintainable insanity of repeated <code>@if clike ... @endif @if java ... @endif @if python ... @endif</code> (especially because the Java case required explicit HTML <code>a</code> elements and full argument lists, with fully qualified data types), we developed another custom Doxygen macro that is recognized and treated specially by <code>src/bindings/swig/swigdoc.py</code>.</p>
<p>The macro is named <code>@sbmlfunction</code>; it takes the name of the libSBML function, followed by a comma, followed by a list of arguments to the function. The list of arguments is <em>mandatory</em>; if the libSBML function in question takes no arguments, then simply leave the list empty, but keep the comma. In addition, when writing the function name, <b>omit the leading <code>SBML_</code> part</b> that appears in the function's C/C++ definition; the prefix it will be added automatically for C++ and C# and omitted from the other languages, where libSBML function names are written without the <code>SBML_</code> part.</p>
<p>The following illustrates the syntax for the case of a function that takes no arguments:</p>
<pre class="fragment">
@sbmlfunction{<span class="placeholder-nospace">name</span>,}
</pre><p>where <span class="placeholder">name</span> is the name of a libSBML function that takes no arguments. If the function does take arguments, <b>use the arguments as they appear in the Java API</b>. The following is an example of a function that takes a single argument:</p>
<pre class="fragment">
@sbmlfunction{<span class="placeholder-nospace">name</span>, <span class="placeholder">arg1type</span>}
</pre><p>If the function takes more than one argument, <b>use commas quoted with a backslash</b> to separate multiple arguments from each other. In other words, functions that take multiple arguments should be written like this:</p>
<pre class="fragment">
@sbmlfunction{<span class="placeholder-nospace">name</span>, <span class="placeholder">arg1type</span>\, <span class="placeholder">arg2type</span>\, ...}
</pre><p>Again, use the argument data types that appear in the Java version of the API. (I.e., use <code>String</code> instead of <code>char *</code>, etc.) Here are two real examples:</p>
<pre class="fragment">
@sbmlfunction{parseL3Formula, String}
@sbmlfunction{parseL3FormulaWithSettings, String\, L3ParserSettings}
</pre><p>The data types do not have to be fully qualified. Line breaks may be used to split long lines.</p>
<p>The reason the Java types are used is because the argument list is only used for producing the Java API documentation&mdash;in order for the correct hyperlinks to be made, the documentation toolchain (specifically, Javadoc) needs the argument list. (It is not required for the other language API documentation, and is actually ignored when producing non-Java manuals.)</p>
<p>This macro is currently <em>only</em> usable for pure functions in libSBML. It is not designed nor tested for use with methods on classes or other situations.</p>
<h2><a class="anchor" id="coding-reusing-text"></a>
4.2 Reusing common text</h2>
<p>One often encounters the need to repeat the same text in different places in the documentation, such as to add a detail to each method where the detail may be relevant. In software documentation, unlike in non-technical prose or creative writing, it is often <em>better</em> to repeat text&mdash;or refer to a common section&mdash;everywhere that it might be relevant, because a reader does not normally read class and method documentation linearly: they jump to a method description from elsewhere. This means that the descriptions need to be reasonably self-contained. However, repeating information by copy-pasting text leads to a maintenance nightmare, requiring any updates or changes to be made in multiple places. We avoid this in libSBML by writing common text as reusable blocks, then using text inclusion mechanisms to insert the common text where it is needed.</p>
<p>A surprising limitation of Doxygen is that it only provides two mechanisms for copying repeated text: <code>@htmlinclude</code>, and the <code>@copydoc</code>/<code>@copybrief</code>/<code>@copydetails</code> set of commands. The former has the limitation that the content is not processed by Doxygen at all: it is inserted raw, and <code>@</code> commands are not interpreted. This means that cross-references are not performed, conditionals are not expanded, etc. Conversely, the latter set of commands can be used to reuse text with Doxygen commands in it, but the commands are oriented towards use in the context of method and data member documentation, and in other contexts have unfortunate behaviors with respect to how they treat the first sentence of the text inside them.</p>
<p>We use both mechanisms, i.e., <code>@htmlinclude</code> and <code>@copydetails</code> (and more rarely, <code>@copydoc</code>) in libSBML, but do so with conventions to work around the behaviors of the latter set of commands.</p>
<h3><a class="anchor" id="coding-copydetails"></a>
4.2.1 Using "@copydetails"</h3>
<p>Experienced Doxygen users may be initially confused by our use of <code>@copydetails</code>, because strictly speaking, we are not using it exactly as intended. The Doxygen command <code>@copydetails</code> is actually intended for copying the "non-brief" part of the documentation of an object, such as a class, for use in documenting multiple similar objects. It can also be used as a general means of copying text fragments if certain conventions are followed. As mentioned above, compared to <code>@htmlinclude</code>, it has the advantage that Doxygen commands inside the fragment are processed normally, including the automatic linking of cross-reference to classes, methods, and other objects. Consequently, we have resorted to using <code>@copydetails</code> in combination with some conventions to achieve what we need.</p>
<ul>
<li>To define a block of text to be reused, use the <code>@class</code> command and give the class a name that begins with the prefix <code>doc_</code>. Separate the class declaration with a blank line. Here is an example: <pre class="fragment">/**
 * @class doc_what_is_listof
 *
 * @par
 * The various ListOf___ classes in SBML are merely containers used for
 * organizing the main components of an SBML model.  ...
 */
</pre> We configure Doxygen to ignore symbols that begin with the string <code>doc_</code>, so these class definitions will never really be defined in the formatted output&mdash;they are fake class declarations used simply so that we can employ <code>@copydetails</code> elsewhere. </li>
<li>Note the use of <code>@par</code> in the example above. This is a hack to force Doxygen to treat the rest of the text as the "detail" portion of a class documentation. <em>Make sure to put <code>@par</code> on a line by itself</em>, or it will not work properly. Special cases: if your text block begins with <code>@note</code> or <code>@warning</code> or similar, you do not need to put the <code>@par</code> first. </li>
<li>For readability in the source code file, if you have more than one <code>@class doc_...</code> definition, separate them with an HTML comment consisting of a line of dashes. Example: <pre class="fragment">/**
 * @class doc_what_are_sbmlnamespaces
 *
 * @par 
 * The SBMLNamespaces object encapsulates SBML Level/Version/namespaces
 * information.  It is used to communicate the SBML Level, Version, and
 * (in Level&amp;nbsp;3) packages used in addition to SBML Level&amp;nbsp;3
 * Core.  A common approach to using libSBML's SBMLNamespaces facilities
 * is to create an SBMLNamespaces object somewhere in a program once,
 * then hand that object as needed to object constructors that accept
 * SBMLNamespaces as arguments.
 *
 * &lt;!-- ------------------------------------------------------------ --&gt;
 * @class doc_what_is_SBMLDocument
 *
 * @par
 * LibSBML uses the class SBMLDocument as a top-level container for
 */
</pre> </li>
<li>To use the text, that is, to insert a text block somewhere in the body of a documentation string, use the command <code>@copydetails</code> followed by the name of the (fake) documentation class. Here is an example: <pre class="fragment">
 * @class ListOfCompartments
 * @sbmlbrief{core} Implementation of SBML Level&nbsp;2's %ListOfCompartments
 * construct.
 * 
 * @copydetails doc_what_is_listof
</pre>
</li>
</ul>
<p>Finally where should you put these <code>@class</code> definitions for creating reusable text blocks? Use one of the following two locations:</p>
<ol type="1">
<li>An individual file where references to the block are made (such as a <code></code>.h file), when the text is specific to that file and never used outside of it; or</li>
<li>The file <code><a class="el" href="common-documentation_8h.html" title="Common text fragments used throughout libSBML&#39;s code documentation.">src/sbml/common/common-documentation.h</a></code>, when the text is something to be reused in multiple other files.</li>
</ol>
<p>In general, the use of <code>@copydetails</code> is preferable to the use of <code>@htmlinclude</code> described below, but in some situations you need to resort to the latter command. In some other situations, you may want to copy the entire method documentation for methods that are repeated on every class; for this, you can use <code>@copydoc</code>, described next. <pre class="fragment">
 * @class ListOfCompartments
 * @sbmlbrief{core} Implementation of SBML Level&nbsp;2's %ListOfCompartments
 * construct.
 * 
 * @copydetails doc_what_is_listof
</pre>
<h3><a class="anchor" id="coding-copydoc"></a>
4.2.2 Using "@copydoc"</h3>
<p>As mentioned above, the Doxygen <code>@copydetails</code> command is actually intended for reusing the "details" portion of a method or other member documentation. If you use <code>@copydoc</code> instead, Doxygen will treat the first sentence of the documentation as a "brief" explanation and the rest as the "details". The effect is the following: in summary lists, it only prints the first sentence, and in every other context, it prints the first sentence separated from the rest of the text with a paragraph break. This paragraph-separated behavior is undesirable when you want to reuse text fragments for general purposes. However, sometimes you really <em>do</em> this behavior, in particular to reuse the entire method documentation from one method to another. That is a situation where <code>@copydoc</code> is perfect.</p>
<p>An example of where <code>@copydoc</code> is useful is in the definition of <code>renameSIdRef()</code> virtual methods that are present on many libSBML classes. For this case, we first define one common documentation block in the file <code><a class="el" href="common-documentation_8h.html" title="Common text fragments used throughout libSBML&#39;s code documentation.">src/sbml/common/common-documentation.h</a></code> mentioned above:</p>
<pre class="fragment">
 * @class doc_renamesidref_common
 *
 * Replaces all uses of a given @c SIdRef type attribute value with another
 * value.
 *
 * @copydetails doc_what_is_sidref
 *
 * This method works by looking at all attributes and (if appropriate)
 * mathematical formulas in MathML content, comparing the referenced
 * identifiers to the value of @p oldid.  If any matches are found, the
 * matching values are replaced with @p newid.  The method does @em not
 * descend into child elements.
 *
 * @param oldid the old identifier
 * @param newid the new identifier
</pre>
<p>Notice how the block above is complete, and includes such things as the definition of parameters with <code>@param</code>. (If return values and other information were appropriate, those would be included as well.) Then, for the definition of <code>renameSIdRef()</code> in each class where it appears, we use <code>@copydoc</code> as follows:</p>
<pre class="fragment">  /**
   * @copydoc doc_renamesidref_common
   */
  virtual void renameSIdRefs(const std::string&amp; oldid, 
                             const std::string&amp; newid);
</pre><p>Of course, for this to make sense, the block of text must match the methods exactly, right down to the use of the same parameter names (<code>oldid</code> and <code>newid</code> in the example above), the return values, the purpose of the method, and so on.</p>
<h3><a class="anchor" id="coding-htmlinclude"></a>
4.2.3 Using "@htmlinclude"</h3>
<p>The <code>@copydetails</code> and <code>@copydoc</code> methods described above works well for most situations, except when you need to use significant HTML commands for special formatting. Some HTML commands will either be intercepted by Doxygen, or else it may become very awkward to write the HTML as comments in a <code>.h</code> file. In those cases, using Doxygen's <code>@htmlinclude</code> can be a better option.</p>
<p>The <code>@htmlinclude</code> command takes a single argument, the name of a file. This file must be placed in a preconfigured location; we use the directory <code>docs/src/common-text/</code> to store files for use with this command. Here is an example of the use of <code>@htmlinclude</code>: </p><pre class="fragment"> * The list of possible types is quite long, because it covers all the
 * mathematical functions that are permitted in SBML. The values are shown
 * in the following table:
 *
 * @htmlinclude astnode-types.html
</pre><p> The file will be included in-line at the location where the reference is made in a documentation string.</p>
<p>It is worth reiterating that normal Doxygen processing is not performed inside the contents of the file included through this mechanism. Cross-references will not be made, the Doxygen <code>@</code>&#160;commands will be ignored, etc. For most cases, it is preferable to use the <code>@copydetails</code> approach described in the previous section.</p>
<h2><a class="anchor" id="coding-links"></a>
4.3 Links</h2>
<p>Most of the time, you can rely on Doxygen's ability to connect a written reference to a class or method to the definition of that class or method. In a few cases, however, you must write an explicit <code>@link</code> ... <code>@endlink</code> command. The syntax of this Doxygen command consists of the target of the link, optionally followed by a name to be used for the link.</p>
<p>In libSBML, the most common situation where an explicit link is needed is in references to enumeration values such as method/function return codes. In those cases, to create a link, use the name of the enumeration (e.g., <code>OperationReturnValues_t</code>), followed by a pound sign (<code>#</code>), followed by the enumeration member, optionally followed by a space and then a name for the link. If the optional space and name are omitted, the name of the link is made the same as the full name of the target; this is generally <em>not</em> desirable because the result is more difficult to read.</p>
<p>Here is an example, drawn from the documentation of the return type of a method on the <a class="el" href="class_compartment.html">Compartment</a> class. In these cases, the name of the link is given as simply the name of the enumeration member without the enumeration prefix: <pre class="fragment">
  /**
   * Sets the value of the "id" attribute of this Compartment.
   *
   * The string @p sid is copied.
   *
   * @copydetails doc_id_syntax
   *
   * @param sid the string to use as the identifier of this Compartment
   *
   * @return integer value indicating success/failure of the
   * function.  The possible values
   * returned by this function are:
   * @li @link OperationReturnValues_t#LIBSBML_OPERATION_SUCCESS LIBSBML_OPERATION_SUCCESS @endlink
   * @li @link OperationReturnValues_t#LIBSBML_INVALID_ATTRIBUTE_VALUE LIBSBML_INVALID_ATTRIBUTE_VALUE @endlink
   */
virtual int setId (const std::string& sid);
</pre>
<p>Another situation that calls for explicit links involves the non-C++ languages. There, it is common to need to refer to a constant defined on the class or package <code>libsbml</code>. Here is an example: </p><pre class="fragment">* @if python LibSBML attaches an identifying
* code to every kind of SBML object.  These are known as &lt;em&gt;SBML type
* codes&lt;/em&gt;.  In the Python language interface for libSBML, the type
* codes are defined as static integer constants in the interface class
* @link libsbml@endlink.  @endif
</pre><h2><a class="anchor" id="coding-conditionals"></a>
4.4 Conditional text</h2>
<p>Speaking of non-C++ languages, it very often happens that one needs to adapt the documentation for something based on the programming language. We have configured Doxygen to define different symbols depending on the language for which the output is being generated; these symbols can be used with Doxygen's <code>@if</code> command to introduce text conditionally. The following table lists the symbols defined for different languages:</p>
<table border="0" class="centered text-table width80 normal-font alt-row-colors">
<tr>
<th align="left">Language </th><th align="left">Symbols defined  </th></tr>
<tr>
<td>C </td><td><code>conly</code>, <code>clike</code>, <code>doxygenCOnly</code>, <code>doxygenCLikeOnly</code>  </td></tr>
<tr>
<td>C++ </td><td><code>cpp</code>, <code>clike</code>, <code>doxygenCppOnly</code>  </td></tr>
<tr>
<td>C# </td><td><code>csharp</code>, <code>notclike</code>, <code>doxygenCsharpOnly</code>  </td></tr>
<tr>
<td>Java </td><td><code>java</code>, <code>notclike</code>  </td></tr>
<tr>
<td>Perl </td><td><code>perl</code>, <code>notclike</code>, <code>doxygenPerlOnly</code>   </td></tr>
<tr>
<td>Python </td><td><code>python</code>, <code>notclike</code>, <code>doxygenPythonOnly</code>  </td></tr>
</table>
<p><b>Important:</b> Doxygen removes the white space surrounding the text inside the conditional and after the <code>@endif</code>. This is highly problematic in most situations, because it produces run-together text in the output. We believe this is a bug and have reported it to the Doxygen developers, but as of version 1.8.6, the behavior persists. To avoid the problem, use the following hack: unless the next character after <code>@endif</code> is a punctuation character or it is the end of the text block, put the sequence <code>@~</code> after the <code>@endif</code>. In other words, write <code>@endif@~</code> in the input, rather than a bare <code>@endif</code>.</p>
<h2><a class="anchor" id="coding-common-text"></a>
4.5 Notes and warnings</h2>
<p>We use two Doxygen commands to produce text that is highlighted in the output in certain ways, to call attention to special issues. These commands do not take any arguments and should be placed before the paragraph of the text to be highlighted.</p>
<p>To call out something special about a class, function, file or other entity, such as a behavior that should be brought to the attention of users or a note about API changes, please use the <code>@note</code> command. This formats the next paragraph with the heading "Note:".</p>
<p>To make a stronger statement, for example to warn users about potentially error-provoking situations or backward-incompatible changes in the API, use the <code>@warning</code> command. This formats the following paragraph with the heading "Warning:". <b>Important</b>: due to limitations in our documentation pipeline (in particular, in the use of Javadoc), the desired formatting can currently only be achieved through the use of an additional explicit bit of HTML code. Specifically, please wrap the paragraph with an HTML <code>&lt;span&gt;</code> element that puts the paragraph contents inside the CSS class "warning". The following example fragment illustrates this: </p><pre class="fragment"> * @class doc_warning_typecodes_not_unique
 *
 * @warning &lt;span class="warning"&gt;The specific integer values of 
 * the possible type codes may be reused by different Level 3
 * package plug-ins.&lt;/span&gt;
</pre><p>As a convention, please put <code>@note</code> blocks after other text such as parameter lists and general explanations. Put <code>@warning</code> blocks after any <code>@note</code> blocks, but put <code>@warning</code> blocks <em>before</em> <code>@see</code> blocks, and put <code>@see</code> very last in documentation. Sometimes there are exceptional situations were it's better to put warnings higher in the documentation of a class or method, but in most cases, the sequence should be: <code>@note</code>, <code>@warning</code>, and <code>@see</code>.</p>
<h2><a class="anchor" id="coding-figures"></a>
4.6 Figures</h2>
<p>Including images and other figures is a relatively simple matter. Copy the file to the directory <code>docs/src/common-graphics/</code>, and then refer to it in the text using the Doxygen command <code>@image</code>. This command takes three arguments: the output type for which the image is to be used, the name of the file, and a text string constituting the caption to be placed under the image. Here is an example: </p><pre class="fragment"> * @image html model-qualifiers.png "Model qualifier relationships"
 * @image latex model-qualifiers.png "Model qualifier relationships"
</pre><p>Since we may at some point generate latex output, always use two <code>@image</code> commands when you use it: once with <code>html</code> and once with <code>latex</code>.</p>
<h2><a class="anchor" id="coding-verbatim"></a>
4.7 Code and verbatim text</h2>
<p>Putting fragments of sample code in the documentation is always helpful for readers. Doing it in a way that produces text with syntactic elements highlighted makes the text more readable. Doxygen can perform syntax coloring on code fragments written in C++, C#, C, Java, and Python, but not other languages, and (particularly unfortunate for libSBML), not for XML either. Here is the approach used in the libSBML documentation for the different cases in order to cope with this limitation.</p>
<ul>
<li>For code written in C++, C#, C, Java, and Python, enclose the code in Doxygen's <code>@code</code>/<code>@endcode</code> construct. Indicate the language as an option to <code>@code</code> in curly braces, using standard filename extensions. For example: <code>@code{.py}</code> for Python, <code>@code{.java}</code> for Java, etc.</li>
</ul>
<ul>
<li>Provide different versions of the code for different languages. Conditionalize them using the standard <code>@if</code> construct. Here is an example: <pre class="fragment">@if cpp
@code{.cpp}
... C++ version ...
@endcode
@endif
@if java
@code{.java}
... Java version ...
@endcode
@endif
@if python
@code{.py}
... Python version ...
@endcode
@endif
... etc. ...
</pre></li>
</ul>
<ul>
<li>For XML (which is not one of types recognized by Doxygen natively), we have to use an entirely different approach: store the content in a file that is processed by a syntax coloring tool, and then use <code>@htmlinclude</code> to incorporate the result in the libSBML documentation. Here is a step-by-step procedure:<ol type="1">
<li>Save the XML content in a file with a <code>.xml</code> extension in the directory <code>docs/src/common-text/</code>.</li>
<li>Obtain the Python-based syntax highlighting application <a href="http://pygments.org" target="_blank">Pygments</a> and use it to perform syntax coloring on the <code>.xml</code> file. Save the result to another file with the same basename but the extension <code>.html</code> in the directory <code>docs/src/common-text/</code>. Here is a general command line for using the program <code>pygmentize</code> provided by the <a href="http://pygments.org" target="_blank">Pygments</a> distribution: <div style="margin-top: 1em; margin-bottom: 1em"><div class="fragment"><div class="line">pygmentize -f html -o outputfile.html intputfile.xml</div>
</div><!-- fragment --></div></li>
<li>Finally, use the Doxygen command <code>@htmlinclude</code> to include the <code>.html</code> file produced by the previous step. See section <a class="el" href="libsbml-coding.html#coding-htmlinclude">4.2.3 Using "@htmlinclude"</a> for more information about using <code>@htmlinclude</code>.</li>
</ol>
</li>
</ul>
<h1><a class="anchor" id="coding-doxygen-summary"></a>
5. Commonly-used commands</h1>
<p>The following is a summary of the Doxygen commands we have found useful so far in documenting libSBML. This is only intended as a quick orientation; they are illustrated in the other sections above, and the complete details of their definitions and use can be found online at the <a href="http://www.doxygen.org">Doxygen</a> website.</p>
<table border="0" class="centered text-table normal-font alt-row-colors" style="margin-left: 1em; margin-right: 1em">
<tr>
<th align="left">Command </th><th>Meaning  </th></tr>
<tr>
<td><code>@author</code>  </td><td>Names the author of the entity being described (a file, a class, etc.).  </td></tr>
<tr>
<td><code>@brief</code>  </td><td>Provides a one-sentence description of the entity being described (a file, a class, etc.). </td></tr>
<tr>
<td><code>@bug</code>  </td><td>Formats the following paragraph with the heading "Bugs:". Useful to indicate that something is known to be a problem in some part of the code. As a convention, please put <code>@bug</code> blocks at the end of a documentation block, for uniformity in the API documentation.  </td></tr>
<tr>
<td><code>@c</code>  </td><td>Puts the following word in typewriter ("code") font. To style more than one word, use <code>&lt;code&gt;the words&lt;/code&gt;</code>. If you need to put something that contains HTML tags in typewriter font, use the <code>&lt;code&gt;the words&lt;/code&gt;</code> form, and use the HTML character codes <code>&amp;lt;</code> and<code>&amp;gt;</code> to embed the opening '<code>&lt;'</code> and '<code>&gt;'</code> characters inside <code>the words</code>.  </td></tr>
<tr>
<td><code>@code{.x}</code> ... <code>@endcode</code>  </td><td>Formats the text as code in the programming language indicated by a filename extension <code>.x</code>. For example, <code>@code{.py}</code> interprets the contents as Python code. See section <a class="el" href="libsbml-coding.html#coding-verbatim">4.7 Code and verbatim text</a> above for more information about how to use this.  </td></tr>
<tr>
<td><code>@class</code>  </td><td>Declares that the following documentation block refers to the named class. Useful only when the block does not immediately precede the class definition (e.g., when it's at the beginning of the file).  </td></tr>
<tr>
<td><code>@copydetails</code>  </td><td>Copies the "detail" portion of the documentation of the given symbol. Please see Section <a class="el" href="libsbml-coding.html#coding-copydetails">4.2.1 Using "@copydetails"</a> for more information.  </td></tr>
<tr>
<td><code>@copydoc</code>  </td><td>Copies the entire documentation of the given symbol&mdash;both the one-sentence brief lead-in explanation and the detailed body. Please see Section <a class="el" href="libsbml-coding.html#coding-copydoc">4.2.2 Using "@copydoc"</a> for more information.  </td></tr>
<tr>
<td><code>@em</code>  </td><td>Puts the following word in italic font, for emphasis. To put multiple words in italics, use <code>&lt;em&gt;the words&lt;/em&gt;</code>.  </td></tr>
<tr>
<td><code>@enum</code>  </td><td>Defines an enumeration. Otherwise identical to <code>@class</code>.  </td></tr>
<tr>
<td><code>@file</code>  </td><td>Defines the name of the current file. </td></tr>
<tr>
<td><code>@htmlinclude</code>  </td><td>Insert the contents of the named file. The file can contain HTML formatting instructions.  </td></tr>
<tr>
<td><code>@if</code> ... <em>symbol</em> <code>@else</code> ... <code>@endif</code>  </td><td>Makes content visible depending on whether the <em>symbol</em> immediately following the <code>@if</code> is defined. If it is defined, the text after the symbol and before either the <code>@else</code> (if it is present) or the <code>@endif</code> is used in the output. <b>Important:</b> As noted above in Section <a class="el" href="libsbml-coding.html#coding-conditionals">4.4 Conditional text</a>, Doxygen removes the white space surrounding the text inside the conditional and after the <code>@endif</code>. This is problematic in most situations, because it produces run-together text in the output. We believe this is a bug and have reported it, but as of Doxygen version 1.8.6, the behavior persists. To avoid the problem, use the following hack: unless the next character after <code>@endif</code> is a punctuation character or it is the end of the text block, put the sequence <code>@~</code> after the <code>@endif</code>. In other words, write <code>@endif@~</code> in the input, rather than a bare <code>@endif</code>.  </td></tr>
<tr>
<td><code>@li</code>  </td><td>Starts (or continues) a bullet list. You can insert the first <code>@li</code> in a comment, and the item will continue until a paragraph break or the next <code>@li</code> command. (Note: even though Doxygen will also recognize hyphens at the beginning of a line as starting a list item, avoid using that approach in favor of the <code>@li</code> command.  </td></tr>
<tr>
<td><code>@p</code>  </td><td>Puts the following word in typewriter ("code") font. This form is preferred when the word is a parameter to a method or function.  </td></tr>
<tr>
<td><code>@param</code>  </td><td>Declares a parameter to a method or function. The first word following <code>@param</code> will be the name of the parameter, and the rest of the text (up to a period or blank) will be used as the description.  </td></tr>
<tr>
<td><code>@n</code>  </td><td>Forces a newline, like HTML's <code>&lt;br&gt;</code>.  </td></tr>
<tr>
<td><code>@note</code>  </td><td>Formats the following paragraph with the heading "Note:". Useful to call out something special about a class, function, file or other entity, such as a behavior that should be brought to the attention of users or a note about API changes compared to previous versions of the software or SBML.  </td></tr>
<tr>
<td><code>@return</code>  </td><td>Declares the return value from a method or function.  </td></tr>
<tr>
<td><code>@sbmlbrief</code>  </td><td>Special command defined for libSBML; see Section <a class="el" href="libsbml-coding.html#coding-doc-h">3.1 Guidelines for .h files</a> for more information.  </td></tr>
<tr>
<td><code>@sbmlconstant</code>  </td><td>Special command defined for libSBML; see Section <a class="el" href="libsbml-coding.html#coding-constant-refs">4.1.1 Referring to libSBML constants</a> for more information.  </td></tr>
<tr>
<td><code>@sbmlfunction</code>  </td><td>Special command defined for libSBML; see Section <a class="el" href="libsbml-coding.html#coding-function-refs">4.1.2 Referring to libSBML pure functions</a> for more information.  </td></tr>
<tr>
<td><code>@see</code>  </td><td>Formats a reference to another entity in the documentation. Commonly used to refer to related classes or methods. <b>Always put <code>@see</code> blocks at the very end of a documentation block</b>, both for uniformity in the API documentation and to avoid a bug in our Javadoc-based document production pipeline.  </td></tr>
<tr>
<td><code>@warning</code>  </td><td>Formats the following paragraph with the heading "Warning:". This is a stronger statement than <code>@note</code>, and is useful to call attention to backward-incompatible changes or potentially error-provoking situations. As a convention, please put <code>@warning</code> blocks after <code>@note</code> blocks in documentation, and please wrap them with an HTML span element with the CSS class "warning". (See discussion in Section <a class="el" href="libsbml-coding.html#coding-common-text">4.5 Notes and warnings</a>.)  </td></tr>
</table>
<p>Many HTML commands will work in comments for Doxygen. For example, a common one is the <code>a</code> tag for linking text to a URL, as in <code>&lt;a href="http://sbml.org"&gt;home page&lt;/a&gt;</code>. Unfortunately, many (most?) HTML commands will <em>not</em> work. For those situations, you may have to resort to using <code>@htmlinclude'ed</code> raw HTML files.</p>
<h1><a class="anchor" id="coding-doc-process"></a>
6. LibSBML's documentation-generation process</h1>
<p>The sequence of events in generating the finished, formatted user documentation is complex. However, it can be useful to have a general sense for how it works, to help find problems when the output produced is not what's expected. This section summarizes the sequences of events for the different types of documentation.</p>
<h2><a class="anchor" id="doc-process-c"></a>
6.1 Generating C++ and C docs</h2>
<p>The steps below are executed by the Makefile located in the directory <code>docs/src/</code>. They are invoked by the command <code>make cpp-manual</code> (for C++) or <code>make c-manual</code> (for C).</p>
<ol type="1">
<li>The process first generates a CSS stylesheet (<code>css/libsbml-package-stylesheet.css</code>) to define formatting rules tailored for each class defined by each Level&#160;3 package extension for libSBML. This is done by the Python program <code>css/generate-pkg-stylesheet.py</code>. This program works by walking down the libSBML package source code directory, examining every <code>.h</code> file looking for <code>@class</code> statements, and collecting the list of class names, then producing a <code>.css</code> file with rules for every class found. The rules define the color symbols associated with every SBML Level&#160;3 package class in the libSBML API documentation.</li>
<li>Next, Doxygen is executed <em>twice</em>. This double run of Doxygen is necessary to use the <code>@ingroup</code> command in the way we use it to produce pages that list all the classes associated with a given SBML Level&#160;3 package. <ol style="margin-above: 0.5em; list-style-type: lower-roman">
<li>
<p class="startli">In the first run of Doxygen, the definition of the macro <code>@sbmlbrief</code> is altered so that it invokes the Doxygen command <code>@addindex</code> with the name of the each libSBML Python class. The results of this run are a number of JavaScript files produced by Doxygen (files like <code>navtreeindex.js</code>, <code>navtree.js</code>, etc.). These files are saved aside temporarily while the next step is performed.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">In the second run of Doxygen, the definition of <code>@sbmlbrief</code> is reverted to its normal form, in which it invokes the Doxygen command <code>@ingroup</code>. This produces the pages in the section titled "Level 3 Extensions" in the final documentation.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The (correct) index files produced in the first run of Doxygen are used to replace the (incorrect) index files from the second run.</p>
<p class="endli"></p>
</li>
</ol>
</li>
<li>Finally, a number of unmodified additional files are copied to the destination directory: CSS style files, JavaScript files, image files, and so on.</li>
</ol>
<p>Without the double run of Doxygen described above, the left-hand table of contents produced by Doxygen is dysfunctional. If you encounter a broken table of contents, then it may indicate something went wrong in the two-step process described above.</p>
<h2><a class="anchor" id="doc-process-python"></a>
6.2 Generating Python docs</h2>
<p>The process for generating the Python API documentation is more involved than the one for C++ and C documentation described above, though some parts are the same. The process for Python begins <em>before</em> you run <code>make python-manual</code> in the <code>docs/src/</code> directory: it begins with the process involving the execution of SWIG. For completeness, the sequence below encompasses this.</p>
<ol type="1">
<li>Before the documentation can be produced&mdash;that is, before the remaining steps below can be executed&mdash;the Python language interface code for libSBML must be generated. This process is triggered by a regular <code>make</code> or <code>cmake</code> at the top level of the libSBML source code directory. Unlike the other language bindings, however, the process for Python has extra complexity because two kinds of output have to be produced: one for use with Doxygen to generate the API documentation, and one for creating plain-text comment strings embedded with the Python code, which users will see when they use Python's interactive help facilities. The steps involved can be summarized like this: <ol style="margin-above: 0.5em; list-style-type: lower-roman">
<li>
<p class="startli">The Python program <code>rewrite_pydoc.py</code> in the subdirectory <code>src/bindings/python/doc-converter/</code> is executed. This Python program reads all the libSBML source code files, copies the class and method comments found therein, performs pattern matching and substitution in the text of those comments to produce versions that follow Python documentation conventions, and finally, produces the file that will ultimately be used by SWIG when it creates the real language interface code.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The Python program <code>src/bindings/swig/swigdoc.py</code> is executed. Like the previous program, it also reads all the libSBML source code files, copies the class and method comments found therein, performs pattern matching and substitution in the text of those comments; however, it produces a <em>different</em>, temporary file that is fed to SWIG only to produce output for the next step.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">SWIG is executed once on the temporary file from the previous step to produce the file <code>src/bindings/python/libsbml-doxygen.py</code>. This will be the file used read by Doxygen to produce the formatted API documentation.</p>
<p class="endli"></p>
</li>
<li>
SWIG is executed a second time on the output from <code>rewrite_doc.py</code> (explained above), to produce the actual Python binding definitions in <code>src/bindings/python/libsbml_wrap.cpp</code>. </li>
</ol>
</li>
<li>The remaining steps below to produce the formatted API documentation output are executed by the Makefile located in the directory <code>docs/src/</code>. They are invoked by the command <code>make java-manual</code>. (Note that the steps <em>above</em> are always performed during a build of libSBML, regardless of whether you generate documentation.)</li>
<li>The <code>make python-manual</code> process first generates a CSS stylesheet (<code>css/libsbml-package-stylesheet.css</code>) to define formatting rules tailored for each class defined by each Level&#160;3 package extension for libSBML. This is done by the Python program <code>css/generate-pkg-stylesheet.py</code>. This program works by walking down the libSBML package source code directory, examining every <code>.h</code> file looking for <code>@class</code> statements, and collecting the list of class names, then producing a <code>.css</code> file with rules for every class found. The rules define the color symbols associated with every SBML Level&#160;3 package in the libSBML API documentation.</li>
<li>Next, a substitution step is performed on the file produced by SWIG. This substitution step is implemented by the Python program <code>pythondocpreprocessor.py</code> in <code>docs/src/</code>. This program reads files found in <code>docs/src/python-substitutions</code> (each file is named after a libSBML Python class), and also reads the file <code>libsbml-doxygen.py</code> previously produced by SWIG in the <code>src/bindings/python/</code> directory (as described above). For each file in the substitutions directory, the program takes the contents of that file and uses the comment strings found therein instead of the comment strings found for that same class in the SWIG-produced <code>libsbml-doxygen.py</code> file. If a subtitution file exists for a class but is empty, then this has the effect of <em>deleting</em> that class from the documentation produced. This admittedly complicated step has two roles: it adds documentation for classes only defined in the language bindings that we could not find another way to document directly (e.g., for classes ASTNodeList, CVTermList, etc.), and second, it omits some internal classes from the API documentation.</li>
<li>Next, the <code>make python-manual</code> process in <code>docs/src/</code> runs Doxygen <em>twice</em>. This double run of Doxygen is necessary to use the <code>@ingroup</code> command in the way we use it to produce pages that list all the classes associated with a given SBML Level&#160;3 package. <ol style="margin-above: 0.5em; list-style-type: lower-roman">
<li>
<p class="startli">In the first run of Doxygen, the definition of the macro <code>@sbmlbrief</code> is altered so that it invokes the Doxygen command <code>@addindex</code> with the name of the each libSBML Python class. The results of this run are a number of JavaScript files produced by Doxygen (files like <code>navtreeindex.js</code>, <code>navtree.js</code>, etc.). These files are saved aside temporarily while the next step is performed.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">In the second run of Doxygen, the definition of <code>@sbmlbrief</code> is reverted to its normal form, in which it invokes the Doxygen command <code>@ingroup</code>. This produces the pages in the section titled "Level 3 Extensions" in the final documentation.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli">The (correct) index files produced in the first run of Doxygen are used to replace the (dysfunctional) index files from the second run.</p>
<p class="endli"></p>
</li>
</ol>
</li>
<li>Finally, a number of unmodified additional files are copied to the destination directory: CSS style files, JavaScript files, image files, and so on.</li>
</ol>
<h2><a class="anchor" id="doc-process-java"></a>
6.3 Generating Java docs</h2>
<p>The process for the Java API documentation is different from all the others because it does not use Doxygen; instead, it uses Javadoc, the common Java documentation-generation tool. In principle we <em>could</em> use Doxygen for Java as well, but the output produced by Doxygen is different in appearance and structure than what Javadoc produces. We felt that using Javadoc would provide something closer to what Java developers are accustomed to seeing, and therefore would be better for Java developers.</p>
<p>The process for generating the Java API documentation actually begins <em>before</em> you run <code>make java-manual</code> in the <code>docs/src/</code> directory: it begins with the process involving the execution of SWIG. For completeness, the sequence below encompasses this.</p>
<ol type="1">
<li>Before the documentation can be produced&mdash;that is, before the remaining steps below can be executed&mdash;the Java bindings files for libSBML must be generated. This process is triggered by a regular <code>make</code> or <code>cmake</code> at the top level of the libSBML source code directory. It will invoke SWIG at some point, but before it invokes SWIG, it will run the custom Python program <code>src/bindings/swig/swigdoc.py</code>. This Python program reads all the libSBML source code files, copies the class and method comments found therein, performs pattern matching and substitution in the text of those comments to produce versions that follow Javadoc conventions, and writes the modified results to the file <code>src/bindings/java/javadoc.i</code>. This file will be read by SWIG when it runs. When SWIG produces the actual Java files that it writes in <code>src/bindings/java/java-files/</code>, it uses the comment strings in this file as the source of the documentation strings attached to the Java class and method definitions.</li>
<li>The remaining steps below to produce the formatted API documentation output are executed by the Makefile located in the directory <code>docs/src/</code>. They are invoked by the command <code>make java-manual</code>. (Note that the steps <em>above</em> are always performed during a build of libSBML, regardless of whether you generate documentation.)</li>
<li>The <code>make java-manual</code> process first generates a CSS stylesheet (<code>css/libsbml-package-stylesheet.css</code>) to define formatting rules tailored for each class defined by each Level&#160;3 package extension for libSBML. This is done by the Python program <code>css/generate-pkg-stylesheet.py</code>. This program works by walking down the libSBML package source code directory, examining every <code>.h</code> file looking for <code>@class</code> statements, and collecting the list of class names, then producing a <code>.css</code> file with rules for every class found. The rules define the color symbols associated with every package and written in places such as the left-hand list of class names in the Javadoc output. (This complicated process is necessary because Javadoc provides no other hooks to modify the appearance of class description pages.)</li>
<li>The Java files previously produced by SWIG for the Java API are copied from their location in <code>src/bindings/java/java-files/</code> to a temporary directory in <code>docs/src</code>.</li>
<li>The Java files located in <code>docs/src/java-substitutions/</code> are copied into the same temporary directory as the previous step, <em>overwriting</em> some of the files originally created by SWIG. These substitutions are necessary for various reasons, including the inability to attach documentation to some types of objects produced by SWIG. The files in <code>docs/src/java-substitutions/</code> do not contain any Java code, only comments. Two points are important to note. First, the comments are in Javadoc format, <em>not</em> in Doxygen format, because the next step will feed the files as-is to Javadoc. Second, if the original source code changes, <b>the substitution files must be modified by hand</b> to account for the changes. This is an obvious maintenance problem, but we currently have no better solution.</li>
<li>Next, Javadoc is executed on the contents of the temporary directory mentioned in the previous step, to generate the basic HTML output files to the destination directory. Javadoc is invoked with a custom doclet that implements features not available in the default Javadoc doclet, such as skipping internal SWIG methods with a certain name, detecting the tag <code>@internal</code> in method comments and omitting those methods from the output, and adding some comments to some methods (at the moment, the <code>delete()</code> method).</li>
<li>A number of unmodified additional files are copied to the destination directory: CSS style files, JavaScript files, image files, and so on.</li>
<li>A number of additional HTML files are copied from <code>docs/src/</code> to the destination directory, but using a procedure that prepends a header, appends a footer, and performs substitutions on variables in the files (for the title and the libSBML version number) to produce their final version in the output directory. These files are for the front page of the API documentation, installation procedures, etc.; basically, content that is not class or method documentation.</li>
<li>The HTML page that lists the libSBML SBML Level&#160;3 extensions is generated using a Python program, <code>docs/src/generate-extensions-summary.py</code>. The file is generated by rewriting an HTML page generated by Javadoc. The transformations include adding the color codes for different Level&#160;3 packages.</li>
<li>All of the HTML files in the output directory are modified to insert a directive to include the <code>sbml.js</code> JavaScript file and to rewrite some of the text in the files (e.g., to remove the word "Package", which is a Java term that has a different meaning for SBML).</li>
<li>Finally, the Java example files are copied from <code>examples/java/</code> to a subdirectory in the destination output directory, along the way being modified to wrap them in HTML code.</li>
</ol>
<h1><a class="anchor" id="coding-misc-doxygen"></a>
7. Miscellaneous Doxygen notes</h1>
<p>The following are some notes and warnings that did not easily fit elsewhere in this section.</p>
<ul>
<li>The doxygen command <code>@internal</code> is (according to the doxygen documentation) supposed to let you flag things as internal implementation code, such that it is not put in the finished documentation. This would be great if we could use it, but I (MH) have been unable to make this work. (Yes, there is a configuration flag, and yes, I've tried setting it both ways.) </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for Doxygen -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">
      Visit <a href="http://sbml.org">SBML.org</a> for more information
    about SBML and libSBML.
    </li>
   </ul>
</div>
</body>
</html>
